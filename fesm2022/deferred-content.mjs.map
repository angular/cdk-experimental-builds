{"version":3,"file":"deferred-content.mjs","sources":["../../../../../k8-fastbuild-ST-46c76129e412/bin/src/cdk-experimental/deferred-content/deferred-content.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.dev/license\n */\n\nimport {\n  Directive,\n  effect,\n  inject,\n  input,\n  TemplateRef,\n  signal,\n  ViewContainerRef,\n} from '@angular/core';\n\n/**\n * A container directive controls the visibility of its content.\n */\n@Directive()\nexport class DeferredContentAware {\n  contentVisible = signal(false);\n  readonly preserveContent = input(false);\n}\n\n/**\n * DeferredContent loads/unloads the content based on the visibility.\n * The visibilty signal is sent from a parent directive implements\n * DeferredContentAware.\n *\n * Use this directive as a host directive. For example:\n *\n * ```ts\n *   @Directive({\n *     selector: 'ng-template[cdkAccordionContent]',\n *     hostDirectives: [DeferredContent],\n *   })\n *   class CdkAccordionContent {}\n * ```\n */\n@Directive()\nexport class DeferredContent {\n  private readonly _deferredContentAware = inject(DeferredContentAware);\n  private readonly _templateRef = inject(TemplateRef);\n  private readonly _viewContainerRef = inject(ViewContainerRef);\n  private _isRendered = false;\n\n  constructor() {\n    effect(() => {\n      if (\n        this._deferredContentAware.preserveContent() ||\n        this._deferredContentAware.contentVisible()\n      ) {\n        if (this._isRendered) return;\n        this._viewContainerRef.clear();\n        this._viewContainerRef.createEmbeddedView(this._templateRef);\n        this._isRendered = true;\n      } else {\n        this._viewContainerRef.clear();\n        this._isRendered = false;\n      }\n    });\n  }\n}\n"],"names":[],"mappings":";;;AAkBA;;AAEG;MAEU,oBAAoB,CAAA;AAC/B,IAAA,cAAc,GAAG,MAAM,CAAC,KAAK,CAAC;AACrB,IAAA,eAAe,GAAG,KAAK,CAAC,KAAK,CAAC;4GAF5B,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA;gGAApB,oBAAoB,EAAA,YAAA,EAAA,IAAA,EAAA,MAAA,EAAA,EAAA,eAAA,EAAA,EAAA,iBAAA,EAAA,iBAAA,EAAA,UAAA,EAAA,iBAAA,EAAA,QAAA,EAAA,IAAA,EAAA,UAAA,EAAA,KAAA,EAAA,iBAAA,EAAA,IAAA,EAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA;;gGAApB,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBADhC;;AAMD;;;;;;;;;;;;;;AAcG;MAEU,eAAe,CAAA;AACT,IAAA,qBAAqB,GAAG,MAAM,CAAC,oBAAoB,CAAC;AACpD,IAAA,YAAY,GAAG,MAAM,CAAC,WAAW,CAAC;AAClC,IAAA,iBAAiB,GAAG,MAAM,CAAC,gBAAgB,CAAC;IACrD,WAAW,GAAG,KAAK;AAE3B,IAAA,WAAA,GAAA;QACE,MAAM,CAAC,MAAK;AACV,YAAA,IACE,IAAI,CAAC,qBAAqB,CAAC,eAAe,EAAE;AAC5C,gBAAA,IAAI,CAAC,qBAAqB,CAAC,cAAc,EAAE,EAC3C;gBACA,IAAI,IAAI,CAAC,WAAW;oBAAE;AACtB,gBAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE;gBAC9B,IAAI,CAAC,iBAAiB,CAAC,kBAAkB,CAAC,IAAI,CAAC,YAAY,CAAC;AAC5D,gBAAA,IAAI,CAAC,WAAW,GAAG,IAAI;;iBAClB;AACL,gBAAA,IAAI,CAAC,iBAAiB,CAAC,KAAK,EAAE;AAC9B,gBAAA,IAAI,CAAC,WAAW,GAAG,KAAK;;AAE5B,SAAC,CAAC;;4GApBO,eAAe,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA;gGAAf,eAAe,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA;;gGAAf,eAAe,EAAA,UAAA,EAAA,CAAA;kBAD3B;;;;;"}