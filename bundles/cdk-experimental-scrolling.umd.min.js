!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/coercion"),require("@angular/cdk/scrolling"),require("@angular/core"),require("rxjs")):"function"==typeof define&&define.amd?define("@angular/cdk-experimental/scrolling",["exports","@angular/cdk/coercion","@angular/cdk/scrolling","@angular/core","rxjs"],t):t(((e=e||self).ng=e.ng||{},e.ng.cdkExperimental=e.ng.cdkExperimental||{},e.ng.cdkExperimental.scrolling={}),e.ng.cdk.coercion,e.ng.cdk.scrolling,e.ng.core,e.rxjs)}(this,(function(e,t,r,n,i){"use strict";
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var o=function(){function e(e){void 0===e&&(e=50),this._totalWeight=0,this._defaultItemSize=e,this._averageItemSize=e}return e.prototype.getAverageItemSize=function(){return this._averageItemSize},e.prototype.addSample=function(e,t){var r=this._totalWeight+e.end-e.start;if(r){var n=(t+this._averageItemSize*this._totalWeight)/r;n&&(this._averageItemSize=n,this._totalWeight=r)}},e.prototype.reset=function(){this._averageItemSize=this._defaultItemSize,this._totalWeight=0},e}(),a=function(){function e(e,t,r){void 0===r&&(r=new o),this.scrolledIndexChange=new i.Observable((function(){throw Error("cdk-virtual-scroll: scrolledIndexChange is currently not supported for the autosize scroll strategy")})),this._viewport=null,this._removalFailures=0,this._minBufferPx=e,this._maxBufferPx=t,this._averager=r}return e.prototype.attach=function(e){this._averager.reset(),this._viewport=e,this._renderContentForCurrentOffset()},e.prototype.detach=function(){this._viewport=null},e.prototype.onContentScrolled=function(){this._viewport&&this._updateRenderedContentAfterScroll()},e.prototype.onDataLengthChanged=function(){this._viewport&&(this._renderContentForCurrentOffset(),this._checkRenderedContentSize())},e.prototype.onContentRendered=function(){this._viewport&&this._checkRenderedContentSize()},e.prototype.onRenderedOffsetChanged=function(){this._viewport&&this._checkRenderedContentOffset()},e.prototype.scrollToIndex=function(){throw Error("cdk-virtual-scroll: scrollToIndex is currently not supported for the autosize scroll strategy")},e.prototype.updateBufferSize=function(e,t){if(t<e)throw"CDK virtual scroll: maxBufferPx must be greater than or equal to minBufferPx";this._minBufferPx=e,this._maxBufferPx=t},e.prototype._updateRenderedContentAfterScroll=function(){var e=this._viewport,t=e.measureScrollOffset(),r=t-this._lastScrollOffset,n=Math.abs(r),i=e.getRenderedRange(),o=0;if(r<0){var a=i.start*this._averager.getAverageItemSize();r-=o=Math.round((a-this._lastRenderedContentOffset)*Math.max(0,Math.min(1,n/(t+n)))),n=Math.abs(r)}var s=this._lastScrollOffset-this._lastRenderedContentOffset,f=this._lastRenderedContentOffset+this._lastRenderedContentSize-(this._lastScrollOffset+e.getViewportSize()),d=n+this._minBufferPx-(r<0?s:f);if(d>0)if(n>=e.getViewportSize())this._renderContentForCurrentOffset();else{var l=Math.max(0,Math.ceil((d-this._minBufferPx+this._maxBufferPx)/this._averager.getAverageItemSize())),u=(r<0?f:s)-this._minBufferPx+n,h=Math.floor(u/this._averager.getAverageItemSize()/(this._removalFailures+1)),c=Math.min(i.end-i.start,Math.max(0,h)),g=this._expandRange(i,r<0?l:0,r>0?l:0);r<0?g.end=Math.max(g.start+1,g.end-c):g.start=Math.min(g.end-1,g.start+c);var _,p=void 0,m=void 0;r<0?((_=e.measureRangeSize({start:g.end,end:i.end}))<=u?(p=this._lastRenderedContentOffset+this._lastRenderedContentSize-_,this._removalFailures=0):(g.end=i.end,p=this._lastRenderedContentOffset+this._lastRenderedContentSize,this._removalFailures++),m="to-end"):((_=e.measureRangeSize({start:i.start,end:g.start}))<=u?(p=this._lastRenderedContentOffset+_,this._removalFailures=0):(g.start=i.start,p=this._lastRenderedContentOffset,this._removalFailures++),m="to-start"),e.setRenderedRange(g),e.setRenderedContentOffset(p+o,m)}else o&&e.setRenderedContentOffset(this._lastRenderedContentOffset+o);this._lastScrollOffset=t},e.prototype._checkRenderedContentSize=function(){var e=this._viewport;this._lastRenderedContentSize=e.measureRenderedContentSize(),this._averager.addSample(e.getRenderedRange(),this._lastRenderedContentSize),this._updateTotalContentSize(this._lastRenderedContentSize)},e.prototype._checkRenderedContentOffset=function(){this._lastRenderedContentOffset=this._viewport.getOffsetToRenderedContentStart()},e.prototype._renderContentForCurrentOffset=function(){var e=this._viewport,t=e.measureScrollOffset();this._lastScrollOffset=t,this._removalFailures=0;var r=this._averager.getAverageItemSize(),n=Math.min(e.getDataLength()-1,Math.floor(t/r)),i=Math.ceil(this._maxBufferPx/r),o=this._expandRange(this._getVisibleRangeForIndex(n),i,i);e.setRenderedRange(o),e.setRenderedContentOffset(r*o.start)},e.prototype._getVisibleRangeForIndex=function(e){var t=this._viewport,r={start:e,end:e+Math.ceil(t.getViewportSize()/this._averager.getAverageItemSize())},n=r.end-t.getDataLength();return n>0&&(r.start=Math.max(0,r.start-n)),r},e.prototype._expandRange=function(e,t,r){var n=this._viewport;return{start:Math.max(0,e.start-t),end:Math.min(n.getDataLength(),e.end+r)}},e.prototype._updateTotalContentSize=function(e){var t=this._viewport,r=t.getRenderedRange(),n=e+(t.getDataLength()-(r.end-r.start))*this._averager.getAverageItemSize();t.setTotalContentSize(n)},e}();function s(e){return e._scrollStrategy}var f=function(){function e(){this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new a(this.minBufferPx,this.maxBufferPx)}return Object.defineProperty(e.prototype,"minBufferPx",{get:function(){return this._minBufferPx},set:function(e){this._minBufferPx=t.coerceNumberProperty(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxBufferPx",{get:function(){return this._maxBufferPx},set:function(e){this._maxBufferPx=t.coerceNumberProperty(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnChanges=function(){this._scrollStrategy.updateBufferSize(this.minBufferPx,this.maxBufferPx)},e.decorators=[{type:n.Directive,args:[{selector:"cdk-virtual-scroll-viewport[autosize]",providers:[{provide:r.VIRTUAL_SCROLL_STRATEGY,useFactory:s,deps:[n.forwardRef((function(){return e}))]}]}]}],e.propDecorators={minBufferPx:[{type:n.Input}],maxBufferPx:[{type:n.Input}]},e}(),d=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{exports:[f],declarations:[f]}]}],e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
e.AutoSizeVirtualScrollStrategy=a,e.CdkAutoSizeVirtualScroll=f,e.ItemSizeAverager=o,e.ScrollingModule=d,e._autoSizeVirtualScrollStrategyFactory=s,Object.defineProperty(e,"__esModule",{value:!0})}));