{"version":3,"file":"cdk-experimental-popover-edit.umd.js","sources":["../../../../../external/npm/node_modules/tslib/tslib.es6.js","../../../../../src/cdk-experimental/popover-edit/constants.ts","../../../../../src/cdk-experimental/popover-edit/polyfill.ts","../../../../../src/cdk-experimental/popover-edit/edit-event-dispatcher.ts","../../../../../src/cdk-experimental/popover-edit/edit-ref.ts","../../../../../src/cdk-experimental/popover-edit/focus-dispatcher.ts","../../../../../src/cdk-experimental/popover-edit/form-value-container.ts","../../../../../src/cdk-experimental/popover-edit/lens-directives.ts","../../../../../src/cdk-experimental/popover-edit/popover-edit-position-strategy-factory.ts","../../../../../src/cdk-experimental/popover-edit/edit-services.ts","../../../../../src/cdk-experimental/popover-edit/focus-escape-notifier.ts","../../../../../src/cdk-experimental/popover-edit/table-directives.ts","../../../../../src/cdk-experimental/popover-edit/popover-edit-module.ts","../../../../../src/cdk-experimental/popover-edit/public-api.ts","../../../../../src/cdk-experimental/popover-edit/index.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/** Selector for finding table cells. */\nexport const CELL_SELECTOR = '.cdk-cell, .mat-cell, td';\n\n/** Selector for finding editable table cells. */\nexport const EDITABLE_CELL_SELECTOR = '.cdk-popover-edit-cell, .mat-popover-edit-cell';\n\n/** Selector for finding table rows. */\nexport const ROW_SELECTOR = '.cdk-row, .mat-row, tr';\n\n/** Selector for finding the table element. */\nexport const TABLE_SELECTOR = 'table, cdk-table, mat-table';\n\n/** CSS class added to the edit lens pane. */\nexport const EDIT_PANE_CLASS = 'cdk-edit-pane';\n\n/** Selector for finding the edit lens pane. */\nexport const EDIT_PANE_SELECTOR = `.${EDIT_PANE_CLASS}, .mat-edit-pane`;\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/** IE 11 compatible matches implementation. */\nexport function matches(element: Element, selector: string): boolean {\n  return element.matches ?\n      element.matches(selector) :\n      (element as any)['msMatchesSelector'](selector);\n}\n\n/** IE 11 compatible closest implementation that is able to start from non-Element Nodes. */\nexport function closest(element: EventTarget|Element|null|undefined, selector: string):\n    Element|null {\n  if (!(element instanceof Node)) { return null; }\n\n  let curr: Node|null = element;\n  while (curr != null && !(curr instanceof Element)) {\n    curr = curr.parentNode;\n  }\n\n  return curr && (hasNativeClosest ?\n      curr.closest(selector) : polyfillClosest(curr, selector)) as Element|null;\n}\n\n/** Polyfill for browsers without Element.closest. */\nfunction polyfillClosest(element: Element, selector: string): Element|null {\n  let curr: Node|null = element;\n  while (curr != null && !(curr instanceof Element && matches(curr, selector))) {\n    curr = curr.parentNode;\n  }\n\n  return (curr || null) as Element|null;\n}\n\nconst hasNativeClosest = !!Element.prototype.closest;\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, NgZone} from '@angular/core';\nimport {combineLatest, MonoTypeOperatorFunction, Observable, pipe, Subject} from 'rxjs';\nimport {\n  audit,\n  auditTime,\n  debounceTime,\n  distinctUntilChanged,\n  filter,\n  map,\n  skip,\n  startWith,\n  shareReplay,\n} from 'rxjs/operators';\n\nimport {CELL_SELECTOR, ROW_SELECTOR} from './constants';\nimport {closest} from './polyfill';\n\n/** The delay applied to mouse events before hiding or showing hover content. */\nconst MOUSE_EVENT_DELAY_MS = 40;\n\n/** The delay for reacting to focus/blur changes. */\nconst FOCUS_DELAY = 0;\n\n/**\n * The possible states for hover content:\n * OFF - Not rendered.\n * FOCUSABLE - Rendered in the dom and styled for its contents to be focusable but invisible.\n * ON - Rendered and fully visible.\n */\nexport const enum HoverContentState {\n  OFF = 0,\n  FOCUSABLE,\n  ON,\n}\n\n// Note: this class is generic, rather than referencing EditRef directly, in order to avoid\n// circular imports. If we were to reference it here, importing the registry into the\n// class that is registering itself will introduce a circular import.\n\n/**\n * Service for sharing delegated events and state for triggering table edits.\n */\n@Injectable()\nexport class EditEventDispatcher<R> {\n  /** A subject that indicates which table cell is currently editing (unless it is disabled). */\n  readonly editing = new Subject<Element|null>();\n\n  /** A subject that indicates which table row is currently hovered. */\n  readonly hovering = new Subject<Element|null>();\n\n  /** A subject that indicates which table row currently contains focus. */\n  readonly focused = new Subject<Element|null>();\n\n  /** A subject that indicates all elements in the table matching ROW_SELECTOR. */\n  readonly allRows = new Subject<NodeList>();\n\n  /** A subject that emits mouse move events from the table indicating the targeted row. */\n  readonly mouseMove = new Subject<Element|null>();\n\n  // TODO: Use WeakSet once IE11 support is dropped.\n  /**\n   * Tracks the currently disabled editable cells - edit calls will be ignored\n   * for these cells.\n   */\n  readonly disabledCells = new WeakMap<Element, boolean>();\n\n  /** The EditRef for the currently active edit lens (if any). */\n  get editRef(): R|null {\n    return this._editRef;\n  }\n  private _editRef: R|null = null;\n\n  // Optimization: Precompute common pipeable operators used per row/cell.\n  private readonly _distinctUntilChanged =\n      distinctUntilChanged<Element|HoverContentState|boolean|null>();\n  private readonly _startWithNull = startWith<Element|null>(null);\n  private readonly _distinctShare = pipe(\n    this._distinctUntilChanged as MonoTypeOperatorFunction<HoverContentState>,\n    shareReplay(1),\n  );\n  private readonly _startWithNullDistinct = pipe(\n    this._startWithNull,\n    this._distinctUntilChanged as MonoTypeOperatorFunction<Element|null>,\n  );\n\n  readonly editingAndEnabled = this.editing.pipe(\n      filter(cell => cell == null || !this.disabledCells.has(cell)),\n      shareReplay(1),\n  );\n\n  /** An observable that emits the row containing focus or an active edit. */\n  readonly editingOrFocused = combineLatest([\n      this.editingAndEnabled.pipe(\n          map(cell => closest(cell, ROW_SELECTOR)),\n          this._startWithNull,\n      ),\n      this.focused.pipe(this._startWithNull),\n  ]).pipe(\n      map(([editingRow, focusedRow]) => focusedRow || editingRow),\n      this._distinctUntilChanged as MonoTypeOperatorFunction<Element|null>,\n      auditTime(FOCUS_DELAY), // Use audit to skip over blur events to the next focused element.\n      this._distinctUntilChanged as MonoTypeOperatorFunction<Element|null>,\n      shareReplay(1),\n  );\n\n  /** Tracks rows that contain hover content with a reference count. */\n  private _rowsWithHoverContent = new WeakMap<Element, number>();\n\n  /** The table cell that has an active edit lens (or null). */\n  private _currentlyEditing: Element|null = null;\n\n  /** The combined set of row hover content states organized by row. */\n  private readonly _hoveredContentStateDistinct = combineLatest([\n      this._getFirstRowWithHoverContent(),\n      this._getLastRowWithHoverContent(),\n      this.editingOrFocused,\n      this.hovering.pipe(\n          distinctUntilChanged(),\n          audit(row => this.mouseMove.pipe(\n              filter(mouseMoveRow => row === mouseMoveRow),\n              this._startWithNull,\n              debounceTime(MOUSE_EVENT_DELAY_MS)),\n          ),\n          this._startWithNullDistinct,\n      ),\n  ]).pipe(\n      skip(1), // Skip the initial emission of [null, null, null, null].\n      map(computeHoverContentState),\n      distinctUntilChanged(areMapEntriesEqual),\n      // Optimization: Enter the zone before shareReplay so that we trigger a single\n      // ApplicationRef.tick for all row updates.\n      this._enterZone(),\n      shareReplay(1),\n  );\n\n  private readonly _editingAndEnabledDistinct = this.editingAndEnabled.pipe(\n      distinctUntilChanged(),\n      this._enterZone(),\n      shareReplay(1),\n  );\n\n  // Optimization: Share row events observable with subsequent callers.\n  // At startup, calls will be sequential by row.\n  private _lastSeenRow: Element|null = null;\n  private _lastSeenRowHoverOrFocus: Observable<HoverContentState>|null = null;\n\n  constructor(private readonly _ngZone: NgZone) {\n    this._editingAndEnabledDistinct.subscribe(cell => {\n      this._currentlyEditing = cell;\n    });\n  }\n\n  /**\n   * Gets an Observable that emits true when the specified element's cell\n   * is editing and false when not.\n   */\n  editingCell(element: Element|EventTarget): Observable<boolean> {\n    let cell: Element|null = null;\n\n    return this._editingAndEnabledDistinct.pipe(\n        map(editCell => editCell === (cell || (cell = closest(element, CELL_SELECTOR)))),\n        this._distinctUntilChanged as MonoTypeOperatorFunction<boolean>,\n    );\n  }\n\n  /**\n   * Stops editing for the specified cell. If the specified cell is not the current\n   * edit cell, does nothing.\n   */\n  doneEditingCell(element: Element|EventTarget): void {\n    const cell = closest(element, CELL_SELECTOR);\n\n    if (this._currentlyEditing === cell) {\n      this.editing.next(null);\n    }\n  }\n\n  /** Sets the currently active EditRef. */\n  setActiveEditRef(ref: R) {\n    this._editRef = ref;\n  }\n\n  /** Unsets the currently active EditRef, if the specified editRef is active. */\n  unsetActiveEditRef(ref: R) {\n    if (this._editRef !== ref) {\n      return;\n    }\n\n    this._editRef = null;\n  }\n\n  /** Adds the specified table row to be tracked for first/last row comparisons. */\n  registerRowWithHoverContent(row: Element): void {\n    this._rowsWithHoverContent.set(row, (this._rowsWithHoverContent.get(row) || 0) + 1);\n  }\n\n  /**\n   * Reference decrements and ultimately removes the specified table row from first/last row\n   * comparisons.\n   */\n  deregisterRowWithHoverContent(row: Element): void {\n    const refCount = this._rowsWithHoverContent.get(row) || 0;\n\n    if (refCount <= 1) {\n      this._rowsWithHoverContent.delete(row);\n    } else {\n      this._rowsWithHoverContent.set(row, refCount - 1);\n    }\n  }\n\n  /**\n   * Gets an Observable that emits true when the specified element's row\n   * contains the focused element or is being hovered over and false when not.\n   * Hovering is defined as when the mouse has momentarily stopped moving over the cell.\n   */\n  hoverOrFocusOnRow(row: Element): Observable<HoverContentState> {\n    if (row !== this._lastSeenRow) {\n      this._lastSeenRow = row;\n      this._lastSeenRowHoverOrFocus = this._hoveredContentStateDistinct.pipe(\n        map(state => state.get(row) || HoverContentState.OFF),\n        this._distinctShare,\n      );\n    }\n\n    return this._lastSeenRowHoverOrFocus!;\n  }\n\n  /**\n   * RxJS operator that enters the Angular zone, used to reduce boilerplate in\n   * re-entering the zone for stream pipelines.\n   */\n  private _enterZone<T>(): MonoTypeOperatorFunction<T> {\n    return (source: Observable<T>) =>\n        new Observable<T>((observer) => source.subscribe({\n             next: (value) => this._ngZone.run(() => observer.next(value)),\n             error: (err) => observer.error(err),\n             complete: () => observer.complete()\n           }));\n  }\n\n  private _getFirstRowWithHoverContent(): Observable<Element|null> {\n    return this._mapAllRowsToSingleRow(rows => {\n      for (let i = 0, row; row = rows[i]; i++) {\n        if (this._rowsWithHoverContent.has(row as Element)) {\n          return row as Element;\n        }\n      }\n      return null;\n    });\n  }\n\n  private _getLastRowWithHoverContent(): Observable<Element|null> {\n    return this._mapAllRowsToSingleRow(rows => {\n      for (let i = rows.length - 1, row; row = rows[i]; i--) {\n        if (this._rowsWithHoverContent.has(row as Element)) {\n          return row as Element;\n        }\n      }\n      return null;\n    });\n  }\n\n  private _mapAllRowsToSingleRow(mapper: (rows: NodeList) => Element|null):\n      Observable<Element|null> {\n    return this.allRows.pipe(\n        map(mapper),\n        this._startWithNullDistinct,\n    );\n  }\n}\n\nfunction computeHoverContentState([firstRow, lastRow, activeRow, hoverRow]: (Element|null)[]):\n     Map<Element, HoverContentState> {\n  const hoverContentState = new Map<Element, HoverContentState>();\n\n  // Add focusable rows.\n  for (const focussableRow of [\n    firstRow,\n    lastRow,\n    activeRow && activeRow.previousElementSibling,\n    activeRow && activeRow.nextElementSibling,\n  ]) {\n    if (focussableRow) {\n      hoverContentState.set(focussableRow as Element, HoverContentState.FOCUSABLE);\n    }\n  }\n\n  // Add/overwrite with fully visible rows.\n  for (const onRow of [activeRow, hoverRow]) {\n    if (onRow) {\n      hoverContentState.set(onRow, HoverContentState.ON);\n    }\n  }\n\n  return hoverContentState;\n}\n\nfunction areMapEntriesEqual<K, V>(a: Map<K, V>, b: Map<K, V>): boolean {\n  if (a.size !== b.size) {\n    return false;\n  }\n\n  // TODO: use Map.prototype.entries once we're off IE11.\n  for (const aKey of Array.from(a.keys())) {\n    if (b.get(aKey) !== a.get(aKey)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, OnDestroy, Self, NgZone} from '@angular/core';\nimport {ControlContainer} from '@angular/forms';\nimport {Observable, Subject} from 'rxjs';\nimport {take} from 'rxjs/operators';\n\nimport {EditEventDispatcher} from './edit-event-dispatcher';\n\n/**\n * Used for communication between the form within the edit lens and the\n * table that launched it. Provided by CdkEditControl within the lens.\n */\n@Injectable()\nexport class EditRef<FormValue> implements OnDestroy {\n  /** Emits the final value of this edit instance before closing. */\n  private readonly _finalValueSubject = new Subject<FormValue>();\n  readonly finalValue: Observable<FormValue> = this._finalValueSubject;\n\n  /** Emits when the user tabs out of this edit lens before closing. */\n  private readonly _blurredSubject = new Subject<void>();\n  readonly blurred: Observable<void> = this._blurredSubject;\n\n  /** The value to set the form back to on revert. */\n  private _revertFormValue: FormValue;\n\n  constructor(\n      @Self() private readonly _form: ControlContainer,\n      private readonly _editEventDispatcher: EditEventDispatcher<EditRef<FormValue>>,\n      private readonly _ngZone: NgZone) {\n    this._editEventDispatcher.setActiveEditRef(this);\n  }\n\n  /**\n   * Called by the host directive's OnInit hook. Reads the initial state of the\n   * form and overrides it with persisted state from previous openings, if\n   * applicable.\n   */\n  init(previousFormValue: FormValue|undefined): void {\n    // Wait for the zone to stabilize before caching the initial value.\n    // This ensures that all form controls have been initialized.\n    this._ngZone.onStable.pipe(take(1)).subscribe(() => {\n      this.updateRevertValue();\n      if (previousFormValue) {\n        this.reset(previousFormValue);\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this._editEventDispatcher.unsetActiveEditRef(this);\n    this._finalValueSubject.next(this._form.value);\n    this._finalValueSubject.complete();\n  }\n\n  /** Whether the attached form is in a valid state. */\n  isValid(): boolean|null {\n    return this._form.valid;\n  }\n\n  /** Set the form's current value as what it will be set to on revert/reset. */\n  updateRevertValue(): void {\n    this._revertFormValue = this._form.value;\n  }\n\n  /** Tells the table to close the edit popup. */\n  close(): void {\n    this._editEventDispatcher.editing.next(null);\n  }\n\n  /** Notifies the active edit that the user has moved focus out of the lens. */\n  blur(): void {\n    this._blurredSubject.next();\n  }\n\n  /**\n   * Resets the form value to the specified value or the previously set\n   * revert value.\n   */\n  reset(value?: FormValue): void {\n    this._form.reset(value || this._revertFormValue);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Directionality} from '@angular/cdk/bidi';\nimport {LEFT_ARROW, UP_ARROW, RIGHT_ARROW, DOWN_ARROW} from '@angular/cdk/keycodes';\nimport {Injectable} from '@angular/core';\nimport {PartialObserver} from 'rxjs';\n\nimport {EDITABLE_CELL_SELECTOR, ROW_SELECTOR, TABLE_SELECTOR} from './constants';\nimport {closest} from './polyfill';\n\n/**\n * Service responsible for moving cell focus around in response to keyboard events.\n * May be overridden to customize the keyboard behavior of popover edit.\n */\n@Injectable({providedIn: 'root'})\nexport class FocusDispatcher {\n  /** Observes keydown events triggered from the table. */\n  readonly keyObserver: PartialObserver<KeyboardEvent>;\n\n  constructor(protected readonly directionality: Directionality) {\n    this.keyObserver = {next: (event) => this.handleKeyboardEvent(event)};\n  }\n\n  /**\n   * Moves focus to earlier or later cells (in dom order) by offset cells relative to\n   * currentCell.\n   */\n  moveFocusHorizontally(currentCell: HTMLElement, offset: number): void {\n    const cells = Array.from(closest(currentCell, TABLE_SELECTOR)!.querySelectorAll(\n                      EDITABLE_CELL_SELECTOR)) as HTMLElement[];\n    const currentIndex = cells.indexOf(currentCell);\n    const newIndex = currentIndex + offset;\n\n    if (cells[newIndex]) {\n      cells[newIndex].focus();\n    }\n  }\n\n  /** Moves focus to up or down by row by offset cells relative to currentCell. */\n  moveFocusVertically(currentCell: HTMLElement, offset: number): void {\n    const currentRow = closest(currentCell, ROW_SELECTOR)!;\n    const rows = Array.from(closest(currentRow, TABLE_SELECTOR)!.querySelectorAll(ROW_SELECTOR));\n    const currentRowIndex = rows.indexOf(currentRow);\n    const currentIndexWithinRow =\n        Array.from(currentRow.querySelectorAll(EDITABLE_CELL_SELECTOR)).indexOf(currentCell);\n    const newRowIndex = currentRowIndex + offset;\n\n    if (rows[newRowIndex]) {\n      const rowToFocus =\n          Array.from(rows[newRowIndex].querySelectorAll(EDITABLE_CELL_SELECTOR)) as HTMLElement[];\n\n      if (rowToFocus[currentIndexWithinRow]) {\n        rowToFocus[currentIndexWithinRow].focus();\n      }\n    }\n  }\n\n  /** Translates arrow keydown events into focus move operations. */\n  protected handleKeyboardEvent(event: KeyboardEvent): void {\n    const cell = closest(event.target, EDITABLE_CELL_SELECTOR) as HTMLElement | null;\n\n    if (!cell) {\n      return;\n    }\n\n    switch (event.keyCode) {\n      case UP_ARROW:\n        this.moveFocusVertically(cell, -1);\n        break;\n      case DOWN_ARROW:\n        this.moveFocusVertically(cell, 1);\n        break;\n      case LEFT_ARROW:\n        this.moveFocusHorizontally(cell, this.directionality.value === 'ltr' ? -1 : 1);\n        break;\n      case RIGHT_ARROW:\n        this.moveFocusHorizontally(cell, this.directionality.value === 'ltr' ? 1 : -1);\n        break;\n      default:\n        // If the keyboard event is not handled, return now so that we don't `preventDefault`.\n        return;\n    }\n\n    event.preventDefault();\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport interface Entry<FormValue> {\n  value?: FormValue;\n}\n\n/**\n * A convenience class for preserving unsaved form state while an edit lens is closed.\n *\n * Example usage:\n * class MyComponent {\n *   readonly nameEditValues = new FormValueContainer&lt;Item, {name: string}&gt;();\n * }\n *\n * &lt;form cdkEditControl [(cdkEditControlPreservedFormValue)]=\"nameEditValues.for(item).value\"&gt;\n */\nexport class FormValueContainer<Key extends object, FormValue> {\n  private _formValues = new WeakMap<Key, Entry<FormValue>>();\n\n  for(key: Key): Entry<FormValue> {\n    const _formValues = this._formValues;\n\n    let entry = _formValues.get(key);\n    if (!entry) {\n      // Expose entry as an object so that we can [(two-way)] bind to its value member\n      entry = {};\n      _formValues.set(key, entry);\n    }\n\n    return entry;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Subject} from 'rxjs';\nimport {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  OnDestroy,\n  OnInit,\n  Input,\n  HostListener,\n} from '@angular/core';\nimport {hasModifierKey} from '@angular/cdk/keycodes';\nimport {EDIT_PANE_SELECTOR} from './constants';\nimport {closest} from './polyfill';\nimport {EditRef} from './edit-ref';\n\n/** Options for what do to when the user clicks outside of an edit lens. */\nexport type PopoverEditClickOutBehavior = 'close' | 'submit' | 'noop';\n\n/**\n * A directive that attaches to a form within the edit lens.\n * It coordinates the form state with the table-wide edit system and handles\n * closing the edit lens when the form is submitted or the user clicks\n * out.\n */\n@Directive({\n  selector: 'form[cdkEditControl]',\n  inputs: [\n    'clickOutBehavior: cdkEditControlClickOutBehavior',\n    'preservedFormValue: cdkEditControlPreservedFormValue',\n    'ignoreSubmitUnlessValid: cdkEditControlIgnoreSubmitUnlessValid',\n  ],\n  outputs: ['preservedFormValueChange: cdkEditControlPreservedFormValueChange'],\n  providers: [EditRef],\n})\nexport class CdkEditControl<FormValue> implements OnDestroy, OnInit {\n  protected readonly destroyed = new Subject<void>();\n\n  /**\n   * Specifies what should happen when the user clicks outside of the edit lens.\n   * The default behavior is to close the lens without submitting the form.\n   */\n  clickOutBehavior: PopoverEditClickOutBehavior = 'close';\n\n  /**\n   * A two-way binding for storing unsubmitted form state. If not provided\n   * then form state will be discarded on close. The PeristBy directive is offered\n   * as a convenient shortcut for these bindings.\n   */\n  preservedFormValue?: FormValue;\n  readonly preservedFormValueChange = new EventEmitter<FormValue>();\n\n  /**\n   * Determines whether the lens will close on form submit if the form is not in a valid\n   * state. By default the lens will remain open.\n   */\n  ignoreSubmitUnlessValid = true;\n\n  constructor(protected readonly elementRef: ElementRef, readonly editRef: EditRef<FormValue>) {}\n\n  ngOnInit(): void {\n    this.editRef.init(this.preservedFormValue);\n    this.editRef.finalValue.subscribe(this.preservedFormValueChange);\n    this.editRef.blurred.subscribe(() => this._handleBlur());\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  /**\n   * Called when the form submits. If ignoreSubmitUnlessValid is true, checks\n   * the form for validity before proceeding.\n   * Updates the revert state with the latest submitted value then closes the edit.\n   */\n  // In Ivy the `host` metadata will be merged, whereas in ViewEngine it is overridden. In order\n  // to avoid double event listeners, we need to use `HostListener`. Once Ivy is the default, we\n  // can move this back into `host`.\n  // tslint:disable:no-host-decorator-in-concrete\n  @HostListener('ngSubmit')\n  handleFormSubmit(): void {\n    if (this.ignoreSubmitUnlessValid && !this.editRef.isValid()) { return; }\n\n    this.editRef.updateRevertValue();\n    this.editRef.close();\n  }\n\n  /** Called on Escape keyup. Closes the edit. */\n  close(): void {\n    // todo - allow this behavior to be customized as well, such as calling\n    // reset before close\n    this.editRef.close();\n  }\n\n  /**\n   * Called on click anywhere in the document.\n   * If the click was outside of the lens, trigger the specified click out behavior.\n   */\n  // In Ivy the `host` metadata will be merged, whereas in ViewEngine it is overridden. In order\n  // to avoid double event listeners, we need to use `HostListener`. Once Ivy is the default, we\n  // can move this back into `host`.\n  // tslint:disable:no-host-decorator-in-concrete\n  @HostListener('document:click', ['$event'])\n  handlePossibleClickOut(evt: Event): void {\n    if (closest(evt.target, EDIT_PANE_SELECTOR)) { return; }\n    switch (this.clickOutBehavior) {\n      case 'submit':\n        // Manually cause the form to submit before closing.\n        this._triggerFormSubmit();\n        this.editRef.close();\n        break;\n      case 'close':\n        this.editRef.close();\n        break;\n      default:\n        break;\n    }\n  }\n\n  // In Ivy the `host` metadata will be merged, whereas in ViewEngine it is overridden. In order\n  // to avoid double event listeners, we need to use `HostListener`. Once Ivy is the default, we\n  // can move this back into `host`.\n  // tslint:disable:no-host-decorator-in-concrete\n  @HostListener('keydown', ['$event'])\n  _handleKeydown(event: KeyboardEvent) {\n    if (event.key === 'Escape' && !hasModifierKey(event)) {\n      this.close();\n      event.preventDefault();\n    }\n  }\n\n  /** Triggers submit on tab out if clickOutBehavior is 'submit'. */\n  private _handleBlur(): void {\n    if (this.clickOutBehavior === 'submit') {\n      // Manually cause the form to submit before closing.\n      this._triggerFormSubmit();\n    }\n  }\n\n  private _triggerFormSubmit() {\n    this.elementRef.nativeElement!.dispatchEvent(new Event('submit'));\n  }\n}\n\n/** Reverts the form to its initial or previously submitted state on click. */\n@Directive({\n  selector: 'button[cdkEditRevert]',\n  host: {\n    'type': 'button', // Prevents accidental form submits.\n  }\n})\nexport class CdkEditRevert<FormValue> {\n  /** Type of the button. Defaults to `button` to avoid accident form submits. */\n  @Input() type: string = 'button';\n\n  constructor(\n      protected readonly editRef: EditRef<FormValue>) {}\n\n  // In Ivy the `host` metadata will be merged, whereas in ViewEngine it is overridden. In order\n  // to avoid double event listeners, we need to use `HostListener`. Once Ivy is the default, we\n  // can move this back into `host`.\n  // tslint:disable:no-host-decorator-in-concrete\n  @HostListener('click')\n  revertEdit(): void {\n    this.editRef.reset();\n  }\n}\n\n/** Closes the lens on click. */\n@Directive({selector: '[cdkEditClose]'})\nexport class CdkEditClose<FormValue> {\n  constructor(\n      protected readonly elementRef: ElementRef<HTMLElement>,\n      protected readonly editRef: EditRef<FormValue>) {\n\n    const nativeElement = elementRef.nativeElement;\n\n    // Prevent accidental form submits.\n    if (nativeElement.nodeName === 'BUTTON' && !nativeElement.getAttribute('type')) {\n      nativeElement.setAttribute('type', 'button');\n    }\n  }\n\n  // In Ivy the `host` metadata will be merged, whereas in ViewEngine it is overridden. In order\n  // to avoid double event listeners, we need to use `HostListener`. Once Ivy is the default, we\n  // can move this back into `host`.\n  // tslint:disable:no-host-decorator-in-concrete\n  @HostListener('click')\n  @HostListener('keydown.enter')\n  @HostListener('keydown.space')\n  closeEdit(): void {\n    // Note that we use `click` here, rather than a keyboard event, because some screen readers\n    // will emit a fake click event instead of an enter keyboard event on buttons. For the keyboard\n    // events we use `keydown`, rather than `keyup`, because we use `keydown` to open the overlay\n    // as well. If we were to use `keyup`, the user could end up opening and closing within\n    // the same event sequence if focus was moved quickly.\n    this.editRef.close();\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Directionality} from '@angular/cdk/bidi';\nimport {Overlay, OverlaySizeConfig, PositionStrategy} from '@angular/cdk/overlay';\nimport {Injectable} from '@angular/core';\n\n/**\n * Overridable factory responsible for configuring how cdkPopoverEdit popovers are positioned\n * and sized.\n */\n@Injectable()\nexport abstract class PopoverEditPositionStrategyFactory {\n  /**\n   * Creates a PositionStrategy based on the specified table cells.\n   * The cells will be provided in DOM order.\n   */\n  abstract positionStrategyForCells(cells: HTMLElement[]): PositionStrategy;\n\n  /**\n   * Creates an OverlaySizeConfig based on the specified table cells.\n   * The cells will be provided in DOM order.\n   */\n  abstract sizeConfigForCells(cells: HTMLElement[]): OverlaySizeConfig;\n}\n\n/**\n * Default implementation of PopoverEditPositionStrategyFactory.\n * Uses a FlexibleConnectedPositionStrategy anchored to the start + top of the cell.\n * Note: This will change to CoverPositionStrategy once it implemented.\n */\n@Injectable()\nexport class DefaultPopoverEditPositionStrategyFactory extends PopoverEditPositionStrategyFactory {\n  constructor(protected readonly direction: Directionality, protected readonly overlay: Overlay) {\n    super();\n  }\n\n  positionStrategyForCells(cells: HTMLElement[]): PositionStrategy {\n    return this.overlay.position()\n        .flexibleConnectedTo(cells[0])\n        .withGrowAfterOpen()\n        .withPush()\n        .withViewportMargin(16)\n        .withPositions([{\n          originX: 'start',\n          originY: 'top',\n          overlayX: 'start',\n          overlayY: 'top',\n        }]);\n  }\n\n  sizeConfigForCells(cells: HTMLElement[]): OverlaySizeConfig {\n    if (cells.length === 0) {\n      return {};\n    }\n\n    if (cells.length === 1) {\n      return {width: cells[0].getBoundingClientRect().width};\n    }\n\n    let firstCell, lastCell;\n    if (this.direction.value === 'ltr') {\n      firstCell = cells[0];\n      lastCell = cells[cells.length - 1];\n    } else {\n      lastCell = cells[0];\n      firstCell = cells[cells.length - 1];\n    }\n\n    return {width: lastCell.getBoundingClientRect().right - firstCell.getBoundingClientRect().left};\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, NgZone} from '@angular/core';\nimport {FocusTrapFactory} from '@angular/cdk/a11y';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {Overlay} from '@angular/cdk/overlay';\nimport {ScrollDispatcher, ViewportRuler} from '@angular/cdk/scrolling';\n\nimport {EditEventDispatcher} from './edit-event-dispatcher';\nimport {FocusDispatcher} from './focus-dispatcher';\nimport {PopoverEditPositionStrategyFactory} from './popover-edit-position-strategy-factory';\nimport {EditRef} from './edit-ref';\n\n/**\n * Optimization\n * Collects multiple Injectables into a singleton shared across the table. By reducing the\n * number of services injected into each CdkPopoverEdit, this saves about 0.023ms of cpu time\n * and 56 bytes of memory per instance.\n */\n@Injectable()\nexport class EditServices {\n  constructor(\n      readonly directionality: Directionality,\n      readonly editEventDispatcher: EditEventDispatcher<EditRef<unknown>>,\n      readonly focusDispatcher: FocusDispatcher,\n      readonly focusTrapFactory: FocusTrapFactory, readonly ngZone: NgZone,\n      readonly overlay: Overlay, readonly positionFactory: PopoverEditPositionStrategyFactory,\n      readonly scrollDispatcher: ScrollDispatcher, readonly viewportRuler: ViewportRuler) {}\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Inject, Injectable, NgZone} from '@angular/core';\nimport {DOCUMENT} from '@angular/common';\nimport {FocusTrap, InteractivityChecker} from '@angular/cdk/a11y';\nimport {Observable, Subject} from 'rxjs';\n\n/** Value indicating whether focus left the target area before or after the enclosed elements. */\nexport const enum FocusEscapeNotifierDirection {\n  START,\n  END,\n}\n\n/**\n * Like FocusTrap, but rather than trapping focus within a dom region, notifies subscribers when\n * focus leaves the region.\n */\nexport class FocusEscapeNotifier extends FocusTrap {\n  private _escapeSubject = new Subject<FocusEscapeNotifierDirection>();\n\n  constructor(\n      element: HTMLElement,\n      checker: InteractivityChecker,\n      ngZone: NgZone,\n      document: Document) {\n    super(element, checker, ngZone, document, true /* deferAnchors */);\n\n    // The focus trap adds \"anchors\" at the beginning and end of a trapped region that redirect\n    // focus. We override that redirect behavior here with simply emitting on a stream.\n    this.startAnchorListener = () => {\n      this._escapeSubject.next(FocusEscapeNotifierDirection.START);\n      return true;\n    };\n    this.endAnchorListener = () => {\n      this._escapeSubject.next(FocusEscapeNotifierDirection.END);\n      return true;\n    };\n\n    this.attachAnchors();\n  }\n\n  escapes(): Observable<FocusEscapeNotifierDirection> {\n    return this._escapeSubject;\n  }\n}\n\n/** Factory that allows easy instantiation of focus escape notifiers. */\n@Injectable({providedIn: 'root'})\nexport class FocusEscapeNotifierFactory {\n  private _document: Document;\n\n  constructor(\n      private _checker: InteractivityChecker,\n      private _ngZone: NgZone,\n      @Inject(DOCUMENT) _document: any) {\n\n    this._document = _document;\n  }\n\n  /**\n   * Creates a focus escape notifier region around the given element.\n   * @param element The element around which focus will be monitored.\n   * @returns The created focus escape notifier instance.\n   */\n  create(element: HTMLElement): FocusEscapeNotifier {\n    return new FocusEscapeNotifier(element, this._checker, this._ngZone, this._document);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {FocusTrap} from '@angular/cdk/a11y';\nimport {OverlayRef, PositionStrategy} from '@angular/cdk/overlay';\nimport {TemplatePortal} from '@angular/cdk/portal';\nimport {\n  AfterViewInit,\n  Directive,\n  ElementRef,\n  EmbeddedViewRef,\n  NgZone,\n  OnDestroy,\n  TemplateRef,\n  ViewContainerRef,\n  HostListener,\n} from '@angular/core';\nimport {fromEvent, fromEventPattern, merge, Subject} from 'rxjs';\nimport {\n  filter,\n  map,\n  mapTo,\n  share,\n  startWith,\n  takeUntil,\n  throttleTime,\n  withLatestFrom,\n} from 'rxjs/operators';\n\nimport {CELL_SELECTOR, EDIT_PANE_CLASS, EDIT_PANE_SELECTOR, ROW_SELECTOR} from './constants';\nimport {EditEventDispatcher, HoverContentState} from './edit-event-dispatcher';\nimport {EditServices} from './edit-services';\nimport {FocusDispatcher} from './focus-dispatcher';\nimport {\n  FocusEscapeNotifier,\n  FocusEscapeNotifierDirection,\n  FocusEscapeNotifierFactory\n} from './focus-escape-notifier';\nimport {closest} from './polyfill';\nimport {EditRef} from './edit-ref';\n\n/**\n * Describes the number of columns before and after the originating cell that the\n * edit popup should span. In left to right locales, before means left and after means\n * right. In right to left locales before means right and after means left.\n */\nexport interface CdkPopoverEditColspan {\n  before?: number;\n  after?: number;\n}\n\n/** Used for rate-limiting mousemove events. */\nconst MOUSE_MOVE_THROTTLE_TIME_MS = 10;\n\n/**\n * A directive that must be attached to enable editability on a table.\n * It is responsible for setting up delegated event handlers and providing the\n * EditEventDispatcher service for use by the other edit directives.\n */\n@Directive({\n  selector: 'table[editable], cdk-table[editable], mat-table[editable]',\n  providers: [EditEventDispatcher, EditServices],\n})\nexport class CdkEditable implements AfterViewInit, OnDestroy {\n  protected readonly destroyed = new Subject<void>();\n\n  constructor(\n      protected readonly elementRef: ElementRef,\n      protected readonly editEventDispatcher: EditEventDispatcher<EditRef<unknown>>,\n      protected readonly focusDispatcher: FocusDispatcher, protected readonly ngZone: NgZone) {}\n\n  ngAfterViewInit(): void {\n    this._listenForTableEvents();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed.next();\n    this.destroyed.complete();\n  }\n\n  private _listenForTableEvents(): void {\n    const element = this.elementRef.nativeElement;\n    const toClosest = (selector: string) =>\n        map((event: UIEvent) => closest(event.target, selector));\n\n    this.ngZone.runOutsideAngular(() => {\n      // Track mouse movement over the table to hide/show hover content.\n      fromEvent<MouseEvent>(element, 'mouseover').pipe(\n          toClosest(ROW_SELECTOR),\n          takeUntil(this.destroyed),\n          ).subscribe(this.editEventDispatcher.hovering);\n      fromEvent<MouseEvent>(element, 'mouseleave').pipe(\n          mapTo(null),\n          takeUntil(this.destroyed),\n          ).subscribe(this.editEventDispatcher.hovering);\n      fromEvent<MouseEvent>(element, 'mousemove').pipe(\n          throttleTime(MOUSE_MOVE_THROTTLE_TIME_MS),\n          toClosest(ROW_SELECTOR),\n          takeUntil(this.destroyed),\n          ).subscribe(this.editEventDispatcher.mouseMove);\n\n      // Track focus within the table to hide/show/make focusable hover content.\n      fromEventPattern<FocusEvent>(\n          handler => element.addEventListener('focus', handler, true),\n          handler => element.removeEventListener('focus', handler, true)\n          ).pipe(\n              toClosest(ROW_SELECTOR),\n              share(),\n              takeUntil(this.destroyed),\n              ).subscribe(this.editEventDispatcher.focused);\n\n      merge(\n        fromEventPattern<FocusEvent>(\n          handler => element.addEventListener('blur', handler, true),\n          handler => element.removeEventListener('blur', handler, true)\n        ),\n        fromEvent<KeyboardEvent>(element, 'keydown').pipe(filter(event => event.key === 'Escape'))\n      ).pipe(\n        mapTo(null),\n        share(),\n        takeUntil(this.destroyed),\n      ).subscribe(this.editEventDispatcher.focused);\n\n      // Keep track of rows within the table. This is used to know which rows with hover content\n      // are first or last in the table. They are kept focusable in case focus enters from above\n      // or below the table.\n      this.ngZone.onStable.pipe(\n          // Optimization: ignore dom changes while focus is within the table as we already\n          // ensure that rows above and below the focused/active row are tabbable.\n          withLatestFrom(this.editEventDispatcher.editingOrFocused),\n          filter(([_, activeRow]) => activeRow == null),\n          map(() => element.querySelectorAll(ROW_SELECTOR)),\n          share(),\n          takeUntil(this.destroyed),\n          ).subscribe(this.editEventDispatcher.allRows);\n\n      fromEvent<KeyboardEvent>(element, 'keydown').pipe(\n          filter(event => event.key === 'Enter'),\n          toClosest(CELL_SELECTOR),\n          takeUntil(this.destroyed),\n          ).subscribe(this.editEventDispatcher.editing);\n\n      // Keydown must be used here or else key autorepeat does not work properly on some platforms.\n      fromEvent<KeyboardEvent>(element, 'keydown')\n          .pipe(takeUntil(this.destroyed))\n          .subscribe(this.focusDispatcher.keyObserver);\n    });\n  }\n}\n\nconst POPOVER_EDIT_HOST_BINDINGS = {\n  '[attr.tabindex]': 'disabled ? null : 0',\n  'class': 'cdk-popover-edit-cell',\n  '[attr.aria-haspopup]': '!disabled',\n};\n\nconst POPOVER_EDIT_INPUTS = [\n  'template: cdkPopoverEdit',\n  'context: cdkPopoverEditContext',\n  'colspan: cdkPopoverEditColspan',\n  'disabled: cdkPopoverEditDisabled',\n];\n\n/**\n * Attaches an ng-template to a cell and shows it when instructed to by the\n * EditEventDispatcher service.\n * Makes the cell focusable.\n */\n@Directive({\n  selector: '[cdkPopoverEdit]:not([cdkPopoverEditTabOut])',\n  host: POPOVER_EDIT_HOST_BINDINGS,\n  inputs: POPOVER_EDIT_INPUTS,\n})\nexport class CdkPopoverEdit<C> implements AfterViewInit, OnDestroy {\n  /** The edit lens template shown over the cell on edit. */\n  template: TemplateRef<any>|null = null;\n\n  /**\n   * Implicit context to pass along to the template. Can be omitted if the template\n   * is defined within the cell.\n   */\n  context?: C;\n\n  /**\n   * Specifies that the popup should cover additional table cells before and/or after\n   * this one.\n   */\n  get colspan(): CdkPopoverEditColspan {\n    return this._colspan;\n  }\n  set colspan(value: CdkPopoverEditColspan) {\n    this._colspan = value;\n\n    // Recompute positioning when the colspan changes.\n    if (this.overlayRef) {\n      this.overlayRef.updatePositionStrategy(this._getPositionStrategy());\n\n      if (this.overlayRef.hasAttached()) {\n        this._updateOverlaySize();\n      }\n    }\n  }\n  private _colspan: CdkPopoverEditColspan = {};\n\n  /** Whether popover edit is disabled for this cell. */\n  get disabled(): boolean {\n    return this._disabled;\n  }\n  set disabled(value: boolean) {\n    this._disabled = value;\n\n    if (value) {\n      this.services.editEventDispatcher.doneEditingCell(this.elementRef.nativeElement!);\n      this.services.editEventDispatcher.disabledCells.set(this.elementRef.nativeElement!, true);\n    } else {\n      this.services.editEventDispatcher.disabledCells.delete(this.elementRef.nativeElement!);\n    }\n  }\n  private _disabled = false;\n\n  protected focusTrap?: FocusTrap;\n  protected overlayRef?: OverlayRef;\n  protected readonly destroyed = new Subject<void>();\n\n  constructor(\n      protected readonly services: EditServices, protected readonly elementRef: ElementRef,\n      protected readonly viewContainerRef: ViewContainerRef) {}\n\n  ngAfterViewInit(): void {\n    this._startListeningToEditEvents();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed.next();\n    this.destroyed.complete();\n\n    if (this.focusTrap) {\n      this.focusTrap.destroy();\n      this.focusTrap = undefined;\n    }\n\n    if (this.overlayRef) {\n      this.overlayRef.dispose();\n    }\n  }\n\n  protected initFocusTrap(): void {\n    this.focusTrap = this.services.focusTrapFactory.create(this.overlayRef!.overlayElement);\n  }\n\n  protected closeEditOverlay(): void {\n    this.services.editEventDispatcher.doneEditingCell(this.elementRef.nativeElement!);\n  }\n\n  protected panelClass(): string {\n    return EDIT_PANE_CLASS;\n  }\n\n  private _startListeningToEditEvents(): void {\n    this.services.editEventDispatcher.editingCell(this.elementRef.nativeElement!)\n        .pipe(takeUntil(this.destroyed))\n        .subscribe((open) => {\n          if (open && this.template) {\n            if (!this.overlayRef) {\n              this._createEditOverlay();\n            }\n\n            this._showEditOverlay();\n          } else if (this.overlayRef) {\n            this._maybeReturnFocusToCell();\n\n            this.overlayRef.detach();\n          }\n        });\n  }\n\n  private _createEditOverlay(): void {\n    this.overlayRef = this.services.overlay.create({\n      disposeOnNavigation: true,\n      panelClass: this.panelClass(),\n      positionStrategy: this._getPositionStrategy(),\n      scrollStrategy: this.services.overlay.scrollStrategies.reposition(),\n      direction: this.services.directionality,\n    });\n\n    this.initFocusTrap();\n    this.overlayRef.overlayElement.setAttribute('aria-role', 'dialog');\n\n    this.overlayRef.detachments().subscribe(() => this.closeEditOverlay());\n  }\n\n  private _showEditOverlay(): void {\n    this.overlayRef!.attach(new TemplatePortal(\n        this.template!,\n        this.viewContainerRef,\n        {$implicit: this.context}));\n\n    // We have to defer trapping focus, because doing so too early can cause the form inside\n    // the overlay to be submitted immediately if it was opened on an Enter keydown event.\n    this.services.ngZone.runOutsideAngular(() => {\n      setTimeout(() => {\n        this.focusTrap!.focusInitialElement();\n      });\n    });\n\n    // Update the size of the popup initially and on subsequent changes to\n    // scroll position and viewport size.\n    merge(this.services.scrollDispatcher.scrolled(), this.services.viewportRuler.change())\n        .pipe(\n          startWith(null),\n          takeUntil(merge(this.overlayRef!.detachments(), this.destroyed))\n        )\n        .subscribe(() => {\n          this._updateOverlaySize();\n        });\n  }\n\n  private _getOverlayCells(): HTMLElement[] {\n    const cell = closest(this.elementRef.nativeElement!, CELL_SELECTOR) as HTMLElement;\n\n    if (!this._colspan.before && !this._colspan.after) {\n      return [cell];\n    }\n\n    const row = closest(this.elementRef.nativeElement!, ROW_SELECTOR)!;\n    const rowCells = Array.from(row.querySelectorAll(CELL_SELECTOR)) as HTMLElement[];\n    const ownIndex = rowCells.indexOf(cell);\n\n    return rowCells.slice(\n        ownIndex - (this._colspan.before || 0), ownIndex + (this._colspan.after || 0) + 1);\n  }\n\n  private _getPositionStrategy(): PositionStrategy {\n    return this.services.positionFactory.positionStrategyForCells(this._getOverlayCells());\n  }\n\n  private _updateOverlaySize(): void {\n    this.overlayRef!.updateSize(\n        this.services.positionFactory.sizeConfigForCells(this._getOverlayCells()));\n  }\n\n  private _maybeReturnFocusToCell(): void {\n    if (closest(document.activeElement, EDIT_PANE_SELECTOR) ===\n        this.overlayRef!.overlayElement) {\n      this.elementRef.nativeElement!.focus();\n    }\n  }\n}\n\n/**\n * Attaches an ng-template to a cell and shows it when instructed to by the\n * EditEventDispatcher service.\n * Makes the cell focusable.\n */\n@Directive({\n  selector: '[cdkPopoverEdit][cdkPopoverEditTabOut]',\n  host: POPOVER_EDIT_HOST_BINDINGS,\n  inputs: POPOVER_EDIT_INPUTS,\n})\nexport class CdkPopoverEditTabOut<C> extends CdkPopoverEdit<C> {\n  protected focusTrap?: FocusEscapeNotifier;\n\n  constructor(\n      elementRef: ElementRef, viewContainerRef: ViewContainerRef, services: EditServices,\n      protected readonly focusEscapeNotifierFactory: FocusEscapeNotifierFactory) {\n    super(services, elementRef, viewContainerRef);\n  }\n\n  protected initFocusTrap(): void {\n    this.focusTrap = this.focusEscapeNotifierFactory.create(this.overlayRef!.overlayElement);\n\n    this.focusTrap.escapes().pipe(takeUntil(this.destroyed)).subscribe(direction => {\n      if (this.services.editEventDispatcher.editRef) {\n        this.services.editEventDispatcher.editRef.blur();\n      }\n\n      this.services.focusDispatcher.moveFocusHorizontally(\n          closest(this.elementRef.nativeElement!, CELL_SELECTOR) as HTMLElement,\n          direction === FocusEscapeNotifierDirection.START ? -1 : 1);\n\n      this.closeEditOverlay();\n    });\n  }\n}\n\n/**\n * A structural directive that shows its contents when the table row containing\n * it is hovered or when an element in the row has focus.\n */\n@Directive({\n  selector: '[cdkRowHoverContent]',\n})\nexport class CdkRowHoverContent implements AfterViewInit, OnDestroy {\n  protected readonly destroyed = new Subject<void>();\n  protected viewRef: EmbeddedViewRef<any>|null = null;\n\n  private _row?: Element;\n\n  constructor(\n      protected readonly services: EditServices, protected readonly elementRef: ElementRef,\n      protected readonly templateRef: TemplateRef<any>,\n      protected readonly viewContainerRef: ViewContainerRef) {}\n\n  ngAfterViewInit(): void {\n    this._row = closest(this.elementRef.nativeElement!, ROW_SELECTOR)!;\n\n    this.services.editEventDispatcher.registerRowWithHoverContent(this._row);\n    this._listenForHoverAndFocusEvents();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed.next();\n    this.destroyed.complete();\n\n    if (this.viewRef) {\n      this.viewRef.destroy();\n    }\n\n    if (this._row) {\n      this.services.editEventDispatcher.deregisterRowWithHoverContent(this._row);\n    }\n  }\n\n  /**\n   * Called immediately after the hover content is created and added to the dom.\n   * In the CDK version, this is a noop but subclasses such as MatRowHoverContent use this\n   * to prepare/style the inserted element.\n   */\n  protected initElement(_: HTMLElement): void {\n  }\n\n  /**\n   * Called when the hover content needs to be focusable to preserve a reasonable tab ordering\n   * but should not yet be shown.\n   */\n  protected makeElementHiddenButFocusable(element: HTMLElement): void {\n    element.style.opacity = '0';\n  }\n\n  /**\n   * Called when the hover content needs to be focusable to preserve a reasonable tab ordering\n   * but should not yet be shown.\n   */\n  protected makeElementVisible(element: HTMLElement): void {\n    element.style.opacity = '';\n  }\n\n  private _listenForHoverAndFocusEvents(): void {\n    this.services.editEventDispatcher.hoverOrFocusOnRow(this._row!)\n        .pipe(takeUntil(this.destroyed))\n        .subscribe(eventState => {\n          // When in FOCUSABLE state, add the hover content to the dom but make it transparent so\n          // that it is in the tab order relative to the currently focused row.\n\n          if (eventState === HoverContentState.ON || eventState === HoverContentState.FOCUSABLE) {\n            if (!this.viewRef) {\n              this.viewRef = this.viewContainerRef.createEmbeddedView(this.templateRef, {});\n              this.initElement(this.viewRef.rootNodes[0] as HTMLElement);\n              this.viewRef.markForCheck();\n            } else if (this.viewContainerRef.indexOf(this.viewRef) === -1) {\n              this.viewContainerRef.insert(this.viewRef!);\n              this.viewRef.markForCheck();\n            }\n\n            if (eventState === HoverContentState.ON) {\n              this.makeElementVisible(this.viewRef.rootNodes[0] as HTMLElement);\n            } else {\n              this.makeElementHiddenButFocusable(this.viewRef.rootNodes[0] as HTMLElement);\n            }\n          } else if (this.viewRef) {\n            this.viewContainerRef.detach(this.viewContainerRef.indexOf(this.viewRef));\n          }\n        });\n  }\n}\n\n/**\n * Opens the closest edit popover to this element, whether it's associated with this exact\n * element or an ancestor element.\n */\n@Directive({\n  selector: '[cdkEditOpen]',\n})\nexport class CdkEditOpen {\n  constructor(\n      protected readonly elementRef: ElementRef<HTMLElement>,\n      protected readonly editEventDispatcher: EditEventDispatcher<EditRef<unknown>>) {\n\n    const nativeElement = elementRef.nativeElement;\n\n    // Prevent accidental form submits.\n    if (nativeElement.nodeName === 'BUTTON' && !nativeElement.getAttribute('type')) {\n      nativeElement.setAttribute('type', 'button');\n    }\n  }\n\n  // In Ivy the `host` metadata will be merged, whereas in ViewEngine it is overridden. In order\n  // to avoid double event listeners, we need to use `HostListener`. Once Ivy is the default, we\n  // can move this back into `host`.\n  // tslint:disable:no-host-decorator-in-concrete\n  @HostListener('click', ['$event'])\n  openEdit(evt: Event): void {\n    this.editEventDispatcher.editing.next(closest(this.elementRef.nativeElement!, CELL_SELECTOR));\n    evt.stopPropagation();\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {NgModule} from '@angular/core';\nimport {OverlayModule} from '@angular/cdk/overlay';\nimport {\n  CdkPopoverEdit,\n  CdkPopoverEditTabOut,\n  CdkRowHoverContent,\n  CdkEditable,\n  CdkEditOpen\n} from './table-directives';\nimport {CdkEditControl,\n  CdkEditRevert,\n  CdkEditClose\n} from './lens-directives';\nimport {\n  DefaultPopoverEditPositionStrategyFactory,\n  PopoverEditPositionStrategyFactory\n} from './popover-edit-position-strategy-factory';\n\nconst EXPORTED_DECLARATIONS = [\n  CdkPopoverEdit,\n  CdkPopoverEditTabOut,\n  CdkRowHoverContent,\n  CdkEditControl,\n  CdkEditRevert,\n  CdkEditClose,\n  CdkEditable,\n  CdkEditOpen,\n];\n\n@NgModule({\n  imports: [\n    OverlayModule,\n  ],\n  exports: EXPORTED_DECLARATIONS,\n  declarations: EXPORTED_DECLARATIONS,\n  providers: [{\n    provide: PopoverEditPositionStrategyFactory,\n    useClass: DefaultPopoverEditPositionStrategyFactory\n  }],\n})\nexport class CdkPopoverEditModule { }\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport * from './edit-event-dispatcher';\nexport * from './edit-ref';\nexport * from './focus-dispatcher';\nexport * from './form-value-container';\nexport * from './lens-directives';\nexport * from './popover-edit-module';\nexport * from './popover-edit-position-strategy-factory';\nexport * from './table-directives';\n\n// Private to Angular Components\nexport {CELL_SELECTOR as _CELL_SELECTOR} from './constants';\nexport {closest as _closest, matches as _matches} from './polyfill';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {EditServices as Éµangular_material_src_cdk_experimental_popover_edit_popover_edit_a} from './edit-services';\nexport {FocusEscapeNotifierFactory as Éµangular_material_src_cdk_experimental_popover_edit_popover_edit_b} from './focus-escape-notifier';"],"names":["Subject","distinctUntilChanged","startWith","pipe","shareReplay","filter","combineLatest","map","auditTime","audit","debounceTime","skip","Observable","Injectable","NgZone","take","ControlContainer","Self","UP_ARROW","DOWN_ARROW","LEFT_ARROW","RIGHT_ARROW","Directionality","EventEmitter","hasModifierKey","Directive","ElementRef","HostListener","Input","Overlay","FocusTrapFactory","ScrollDispatcher","ViewportRuler","FocusTrap","InteractivityChecker","Inject","DOCUMENT","fromEvent","takeUntil","mapTo","throttleTime","fromEventPattern","share","merge","withLatestFrom","TemplatePortal","ViewContainerRef","TemplateRef","NgModule","OverlayModule"],"mappings":"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"}