!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/cdk/bidi"),require("@angular/cdk/keycodes"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/cdk/a11y"),require("@angular/cdk/scrolling"),require("@angular/common")):"function"==typeof define&&define.amd?define("@angular/cdk-experimental/popover-edit",["exports","@angular/core","rxjs","rxjs/operators","@angular/forms","@angular/cdk/bidi","@angular/cdk/keycodes","@angular/cdk/overlay","@angular/cdk/portal","@angular/cdk/a11y","@angular/cdk/scrolling","@angular/common"],t):t(((e=e||self).ng=e.ng||{},e.ng.cdkExperimental=e.ng.cdkExperimental||{},e.ng.cdkExperimental.popoverEdit={}),e.ng.core,e.rxjs,e.rxjs.operators,e.ng.forms,e.ng.cdk.bidi,e.ng.cdk.keycodes,e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.cdk.a11y,e.ng.cdk.scrolling,e.ng.common)}(this,(function(e,t,i,r,n,o,s,a,c,l,u,p){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function h(e,t){function i(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],i=0;return t?t.call(e):{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}function v(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var y=".cdk-cell, .mat-cell, td",m=".cdk-popover-edit-cell, .mat-popover-edit-cell",g=".cdk-row, .mat-row, tr";
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function b(e,t){return e.matches?e.matches(t):e.msMatchesSelector(t)}function _(e,t){if(!(e instanceof Node))return null;for(var i=e;null!=i&&!(i instanceof Element);)i=i.parentNode;return i&&(E?i.closest(t):function r(e,t){for(var i=e;null!=i&&!(i instanceof Element&&b(i,t));)i=i.parentNode;return i||null}(i,t))}var E=!!Element.prototype.closest,R=40,k=0,w=function(){function e(e){var t=this;this._ngZone=e,this.editing=new i.Subject,this.hovering=new i.Subject,this.focused=new i.Subject,this.allRows=new i.Subject,this.mouseMove=new i.Subject,this.disabledCells=new WeakMap,this._editRef=null,this._distinctUntilChanged=r.distinctUntilChanged(),this._startWithNull=r.startWith(null),this._distinctShare=i.pipe(this._distinctUntilChanged,r.share()),this._startWithNullDistinct=i.pipe(this._startWithNull,this._distinctUntilChanged),this.editingAndEnabled=this.editing.pipe(r.filter((function(e){return null==e||!t.disabledCells.has(e)})),r.share()),this.editingOrFocused=i.combineLatest([this.editingAndEnabled.pipe(r.map((function(e){return _(e,g)})),this._startWithNull),this.focused.pipe(this._startWithNull)]).pipe(r.map((function(e){var t=v(e,2);return t[1]||t[0]})),this._distinctUntilChanged,r.auditTime(k),this._distinctUntilChanged,r.share()),this._rowsWithHoverContent=new WeakMap,this._currentlyEditing=null,this._hoveredContentStateDistinct=i.combineLatest([this._getFirstRowWithHoverContent(),this._getLastRowWithHoverContent(),this.editingOrFocused,this.hovering.pipe(r.distinctUntilChanged(),r.audit((function(e){return t.mouseMove.pipe(r.filter((function(t){return e===t})),t._startWithNull,r.debounceTime(R))})),this._startWithNullDistinct)]).pipe(r.skip(1),r.map(C),r.distinctUntilChanged(S),this._enterZone(),r.share()),this._editingAndEnabledDistinct=this.editingAndEnabled.pipe(r.distinctUntilChanged(),this._enterZone(),r.share()),this._lastSeenRow=null,this._lastSeenRowHoverOrFocus=null,this._editingAndEnabledDistinct.subscribe((function(e){t._currentlyEditing=e}))}return Object.defineProperty(e.prototype,"editRef",{get:function(){return this._editRef},enumerable:!0,configurable:!0}),e.prototype.editingCell=function(e){var t=null;return this._editingAndEnabledDistinct.pipe(r.map((function(i){return i===(t||(t=_(e,y)))})),this._distinctUntilChanged)},e.prototype.doneEditingCell=function(e){var t=_(e,y);this._currentlyEditing===t&&this.editing.next(null)},e.prototype.setActiveEditRef=function(e){this._editRef=e},e.prototype.unsetActiveEditRef=function(e){this._editRef===e&&(this._editRef=null)},e.prototype.registerRowWithHoverContent=function(e){this._rowsWithHoverContent.set(e,(this._rowsWithHoverContent.get(e)||0)+1)},e.prototype.deregisterRowWithHoverContent=function(e){var t=this._rowsWithHoverContent.get(e)||0;t<=1?this._rowsWithHoverContent.delete(e):this._rowsWithHoverContent.set(e,t-1)},e.prototype.hoverOrFocusOnRow=function(e){return e!==this._lastSeenRow&&(this._lastSeenRow=e,this._lastSeenRowHoverOrFocus=this._hoveredContentStateDistinct.pipe(r.map((function(t){return t.get(e)||0})),this._distinctShare)),this._lastSeenRowHoverOrFocus},e.prototype._enterZone=function(){var e=this;return function(t){return new i.Observable((function(i){return t.subscribe({next:function(t){return e._ngZone.run((function(){return i.next(t)}))},error:function(e){return i.error(e)},complete:function(){return i.complete()}})}))}},e.prototype._getFirstRowWithHoverContent=function(){var e=this;return this._mapAllRowsToSingleRow((function(t){for(var i=0,r=void 0;r=t[i];i++)if(e._rowsWithHoverContent.has(r))return r;return null}))},e.prototype._getLastRowWithHoverContent=function(){var e=this;return this._mapAllRowsToSingleRow((function(t){for(var i=t.length-1,r=void 0;r=t[i];i--)if(e._rowsWithHoverContent.has(r))return r;return null}))},e.prototype._mapAllRowsToSingleRow=function(e){return this.allRows.pipe(r.map(e),this._startWithNullDistinct)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:t.NgZone}]},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function C(e){var t,i,r,n,o=v(e,4),s=o[0],a=o[1],c=o[2],l=o[3],u=new Map;try{for(var p=f([s,a,c&&c.previousElementSibling,c&&c.nextElementSibling]),d=p.next();!d.done;d=p.next()){var h=d.value;h&&u.set(h,1)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(i=p.return)&&i.call(p)}finally{if(t)throw t.error}}try{for(var y=f([c,l]),m=y.next();!m.done;m=y.next()){var g=m.value;g&&u.set(g,2)}}catch(e){r={error:e}}finally{try{m&&!m.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}return u}function S(e,t){var i,r;if(e.size!==t.size)return!1;try{for(var n=f(Array.from(e.keys())),o=n.next();!o.done;o=n.next()){var s=o.value;if(t.get(s)!==e.get(s))return!1}}catch(e){i={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return!0}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var O=function(){function e(e,t,r){this._form=e,this._editEventDispatcher=t,this._ngZone=r,this._finalValueSubject=new i.Subject,this.finalValue=this._finalValueSubject.asObservable(),this._blurredSubject=new i.Subject,this.blurred=this._blurredSubject.asObservable(),this._editEventDispatcher.setActiveEditRef(this)}return e.prototype.init=function(e){var t=this;this._ngZone.onStable.pipe(r.take(1)).subscribe((function(){t.updateRevertValue(),e&&t.reset(e)}))},e.prototype.ngOnDestroy=function(){this._editEventDispatcher.unsetActiveEditRef(this),this._finalValueSubject.next(this._form.value),this._finalValueSubject.complete()},e.prototype.isValid=function(){return this._form.valid},e.prototype.updateRevertValue=function(){this._revertFormValue=this._form.value},e.prototype.close=function(){this._editEventDispatcher.editing.next(null)},e.prototype.blur=function(){this._blurredSubject.next()},e.prototype.reset=function(e){this._form.reset(e||this._revertFormValue)},e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:n.ControlContainer,decorators:[{type:t.Self}]},{type:w},{type:t.NgZone}]},e}(),D=function(){function e(e){var t=this;this.directionality=e,this.keyObserver={next:function(e){return t.handleKeyboardEvent(e)}}}return e.prototype.moveFocusHorizontally=function(e,t){var i=Array.from(_(e,"table, cdk-table, mat-table").querySelectorAll(m)),r=i.indexOf(e)+t;i[r]&&i[r].focus()},e.prototype.moveFocusVertically=function(e,t){var i=_(e,g),r=Array.from(_(i,"table, cdk-table, mat-table").querySelectorAll(g)),n=r.indexOf(i),o=Array.from(i.querySelectorAll(m)).indexOf(e),s=n+t;if(r[s]){var a=Array.from(r[s].querySelectorAll(m));a[o]&&a[o].focus()}},e.prototype.handleKeyboardEvent=function(e){var t=_(e.target,m);if(t){switch(e.keyCode){case s.UP_ARROW:this.moveFocusVertically(t,-1);break;case s.DOWN_ARROW:this.moveFocusVertically(t,1);break;case s.LEFT_ARROW:this.moveFocusHorizontally(t,"ltr"===this.directionality.value?-1:1);break;case s.RIGHT_ARROW:this.moveFocusHorizontally(t,"ltr"===this.directionality.value?1:-1);break;default:return}e.preventDefault()}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:o.Directionality}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function i(){return new e(t.ɵɵinject(o.Directionality))},token:e,providedIn:"root"}),e}(),F=function(){function e(){this._formValues=new WeakMap}return e.prototype.for=function(e){var t=this._formValues,i=t.get(e);return i||t.set(e,i={}),i},e}(),j=function(){function e(e,r){this.elementRef=e,this.editRef=r,this.destroyed=new i.Subject,this.clickOutBehavior="close",this.preservedFormValueChange=new t.EventEmitter,this.ignoreSubmitUnlessValid=!0}return e.prototype.ngOnInit=function(){var e=this;this.editRef.init(this.preservedFormValue),this.editRef.finalValue.subscribe(this.preservedFormValueChange),this.editRef.blurred.subscribe((function(){return e._handleBlur()}))},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete()},e.prototype.handleFormSubmit=function(){this.ignoreSubmitUnlessValid&&!this.editRef.isValid()||(this.editRef.updateRevertValue(),this.editRef.close())},e.prototype.close=function(){this.editRef.close()},e.prototype.handlePossibleClickOut=function(e){if(!_(e.target,".cdk-edit-pane, .mat-edit-pane"))switch(this.clickOutBehavior){case"submit":this._triggerFormSubmit(),this.editRef.close();break;case"close":this.editRef.close()}},e.prototype._handleKeydown=function(e){"Escape"!==e.key||s.hasModifierKey(e)||(this.close(),e.preventDefault())},e.prototype._handleBlur=function(){"submit"===this.clickOutBehavior&&this._triggerFormSubmit()},e.prototype._triggerFormSubmit=function(){this.elementRef.nativeElement.dispatchEvent(new Event("submit"))},e.decorators=[{type:t.Directive,args:[{selector:"form[cdkEditControl]",inputs:["clickOutBehavior: cdkEditControlClickOutBehavior","preservedFormValue: cdkEditControlPreservedFormValue","ignoreSubmitUnlessValid: cdkEditControlIgnoreSubmitUnlessValid"],outputs:["preservedFormValueChange: cdkEditControlPreservedFormValueChange"],providers:[O]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:O}]},e.propDecorators={handleFormSubmit:[{type:t.HostListener,args:["ngSubmit"]}],handlePossibleClickOut:[{type:t.HostListener,args:["document:click",["$event"]]}],_handleKeydown:[{type:t.HostListener,args:["keydown",["$event"]]}]},e}(),x=function(){function e(e){this.editRef=e,this.type="button"}return e.prototype.revertEdit=function(){this.editRef.reset()},e.decorators=[{type:t.Directive,args:[{selector:"button[cdkEditRevert]",host:{type:"button"}}]}],e.ctorParameters=function(){return[{type:O}]},e.propDecorators={type:[{type:t.Input}],revertEdit:[{type:t.HostListener,args:["click"]}]},e}(),P=function(){function e(e,t){this.elementRef=e,this.editRef=t;var i=e.nativeElement;"BUTTON"!==i.nodeName||i.getAttribute("type")||i.setAttribute("type","button")}return e.prototype.closeEdit=function(){this.editRef.close()},e.decorators=[{type:t.Directive,args:[{selector:"[cdkEditClose]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:O}]},e.propDecorators={closeEdit:[{type:t.HostListener,args:["click"]},{type:t.HostListener,args:["keyup.enter"]},{type:t.HostListener,args:["keyup.space"]}]},e}(),A=function(){function e(){}return e.decorators=[{type:t.Injectable}],e}(),T=function(e){function i(t,i){var r=e.call(this)||this;return r.direction=t,r.overlay=i,r}return h(i,e),i.prototype.positionStrategyForCells=function(e){return this.overlay.position().flexibleConnectedTo(e[0]).withGrowAfterOpen().withPush().withViewportMargin(16).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}])},i.prototype.sizeConfigForCells=function(e){return 0===e.length?{}:1===e.length?{width:e[0].getBoundingClientRect().width}:("ltr"===this.direction.value?(t=e[0],i=e[e.length-1]):(i=e[0],t=e[e.length-1]),{width:i.getBoundingClientRect().right-t.getBoundingClientRect().left});var t,i},i.decorators=[{type:t.Injectable}],i.ctorParameters=function(){return[{type:o.Directionality},{type:a.Overlay}]},i}(A),V=function(){function e(e,t,i,r,n,o,s,a,c){this.directionality=e,this.editEventDispatcher=t,this.focusDispatcher=i,this.focusTrapFactory=r,this.ngZone=n,this.overlay=o,this.positionFactory=s,this.scrollDispatcher=a,this.viewportRuler=c}return e.decorators=[{type:t.Injectable}],e.ctorParameters=function(){return[{type:o.Directionality},{type:w},{type:D},{type:l.FocusTrapFactory},{type:t.NgZone},{type:a.Overlay},{type:A},{type:u.ScrollDispatcher},{type:u.ViewportRuler}]},e}(),H=function(e){function t(t,r,n,o){var s=e.call(this,t,r,n,o,!0)||this;return s._escapeSubject=new i.Subject,s.startAnchorListener=function(){return s._escapeSubject.next(0),!0},s.endAnchorListener=function(){return s._escapeSubject.next(1),!0},s.attachAnchors(),s}return h(t,e),t.prototype.escapes=function(){return this._escapeSubject.asObservable()},t}(l.FocusTrap),W=function(){function e(e,t,i){this._checker=e,this._ngZone=t,this._document=i}return e.prototype.create=function(e){return new H(e,this._checker,this._ngZone,this._document)},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:l.InteractivityChecker},{type:t.NgZone},{type:void 0,decorators:[{type:t.Inject,args:[p.DOCUMENT]}]}]},e.ɵprov=t.ɵɵdefineInjectable({factory:function i(){return new e(t.ɵɵinject(l.InteractivityChecker),t.ɵɵinject(t.NgZone),t.ɵɵinject(p.DOCUMENT))},token:e,providedIn:"root"}),e}(),U=function(){function e(e,t,r,n){this.elementRef=e,this.editEventDispatcher=t,this.focusDispatcher=r,this.ngZone=n,this.destroyed=new i.Subject}return e.prototype.ngAfterViewInit=function(){this._listenForTableEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete()},e.prototype._listenForTableEvents=function(){var e=this,t=this.elementRef.nativeElement,n=function(e){return r.map((function(t){return _(t.target,e)}))};this.ngZone.runOutsideAngular((function(){i.fromEvent(t,"mouseover").pipe(n(g),r.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.hovering),i.fromEvent(t,"mouseleave").pipe(r.mapTo(null),r.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.hovering),i.fromEvent(t,"mousemove").pipe(r.throttleTime(10),n(g),r.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.mouseMove),i.fromEventPattern((function(e){return t.addEventListener("focus",e,!0)}),(function(e){return t.removeEventListener("focus",e,!0)})).pipe(r.takeUntil(e.destroyed),n(g),r.share()).subscribe(e.editEventDispatcher.focused),i.merge(i.fromEventPattern((function(e){return t.addEventListener("blur",e,!0)}),(function(e){return t.removeEventListener("blur",e,!0)})),i.fromEvent(t,"keydown").pipe(r.filter((function(e){return"Escape"===e.key})))).pipe(r.takeUntil(e.destroyed),r.mapTo(null),r.share()).subscribe(e.editEventDispatcher.focused),e.ngZone.onStable.pipe(r.takeUntil(e.destroyed),r.withLatestFrom(e.editEventDispatcher.editingOrFocused),r.filter((function(e){return null==v(e,2)[1]})),r.map((function(){return t.querySelectorAll(g)})),r.share()).subscribe(e.editEventDispatcher.allRows),i.fromEvent(t,"keydown").pipe(r.filter((function(e){return"Enter"===e.key})),n(y),r.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.editing),i.fromEvent(t,"keydown").pipe(r.takeUntil(e.destroyed)).subscribe(e.focusDispatcher.keyObserver)}))},e.decorators=[{type:t.Directive,args:[{selector:"table[editable], cdk-table[editable], mat-table[editable]",providers:[w,V]}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:w},{type:D},{type:t.NgZone}]},e}(),N={"[attr.tabindex]":"disabled ? null : 0",class:"cdk-popover-edit-cell","[attr.aria-haspopup]":"!disabled"},L=["template: cdkPopoverEdit","context: cdkPopoverEditContext","colspan: cdkPopoverEditColspan","disabled: cdkPopoverEditDisabled"],I=function(){function e(e,t,r){this.services=e,this.elementRef=t,this.viewContainerRef=r,this.template=null,this._colspan={},this._disabled=!1,this.destroyed=new i.Subject}return Object.defineProperty(e.prototype,"colspan",{get:function(){return this._colspan},set:function(e){this._colspan=e,this.overlayRef&&(this.overlayRef.updatePositionStrategy(this._getPositionStrategy()),this.overlayRef.hasAttached()&&this._updateOverlaySize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,e?(this.services.editEventDispatcher.doneEditingCell(this.elementRef.nativeElement),this.services.editEventDispatcher.disabledCells.set(this.elementRef.nativeElement,!0)):this.services.editEventDispatcher.disabledCells.delete(this.elementRef.nativeElement)},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){this._startListeningToEditEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete(),this.focusTrap&&(this.focusTrap.destroy(),this.focusTrap=void 0),this.overlayRef&&this.overlayRef.dispose()},e.prototype.initFocusTrap=function(){this.focusTrap=this.services.focusTrapFactory.create(this.overlayRef.overlayElement)},e.prototype.closeEditOverlay=function(){this.services.editEventDispatcher.doneEditingCell(this.elementRef.nativeElement)},e.prototype.panelClass=function(){return"cdk-edit-pane"},e.prototype._startListeningToEditEvents=function(){var e=this;this.services.editEventDispatcher.editingCell(this.elementRef.nativeElement).pipe(r.takeUntil(this.destroyed)).subscribe((function(t){t&&e.template?(e.overlayRef||e._createEditOverlay(),e._showEditOverlay()):e.overlayRef&&(e._maybeReturnFocusToCell(),e.overlayRef.detach())}))},e.prototype._createEditOverlay=function(){var e=this;this.overlayRef=this.services.overlay.create({disposeOnNavigation:!0,panelClass:this.panelClass(),positionStrategy:this._getPositionStrategy(),scrollStrategy:this.services.overlay.scrollStrategies.reposition(),direction:this.services.directionality}),this.initFocusTrap(),this.overlayRef.overlayElement.setAttribute("aria-role","dialog"),this.overlayRef.detachments().subscribe((function(){return e.closeEditOverlay()}))},e.prototype._showEditOverlay=function(){var e=this;this.overlayRef.attach(new c.TemplatePortal(this.template,this.viewContainerRef,{$implicit:this.context})),this.services.ngZone.runOutsideAngular((function(){setTimeout((function(){e.focusTrap.focusInitialElement()}))})),i.merge(this.services.scrollDispatcher.scrolled(),this.services.viewportRuler.change()).pipe(r.startWith(null),r.takeUntil(this.overlayRef.detachments()),r.takeUntil(this.destroyed)).subscribe((function(){e._updateOverlaySize()}))},e.prototype._getOverlayCells=function(){var e=_(this.elementRef.nativeElement,y);if(!this._colspan.before&&!this._colspan.after)return[e];var t=_(this.elementRef.nativeElement,g),i=Array.from(t.querySelectorAll(y)),r=i.indexOf(e);return i.slice(r-(this._colspan.before||0),r+(this._colspan.after||0)+1)},e.prototype._getPositionStrategy=function(){return this.services.positionFactory.positionStrategyForCells(this._getOverlayCells())},e.prototype._updateOverlaySize=function(){this.overlayRef.updateSize(this.services.positionFactory.sizeConfigForCells(this._getOverlayCells()))},e.prototype._maybeReturnFocusToCell=function(){_(document.activeElement,".cdk-edit-pane, .mat-edit-pane")===this.overlayRef.overlayElement&&this.elementRef.nativeElement.focus()},e.decorators=[{type:t.Directive,args:[{selector:"[cdkPopoverEdit]:not([cdkPopoverEditTabOut])",host:N,inputs:L}]}],e.ctorParameters=function(){return[{type:V},{type:t.ElementRef},{type:t.ViewContainerRef}]},e}(),Z=function(e){function i(t,i,r,n){var o=e.call(this,r,t,i)||this;return o.focusEscapeNotifierFactory=n,o}return h(i,e),i.prototype.initFocusTrap=function(){var e=this;this.focusTrap=this.focusEscapeNotifierFactory.create(this.overlayRef.overlayElement),this.focusTrap.escapes().pipe(r.takeUntil(this.destroyed)).subscribe((function(t){e.services.editEventDispatcher.editRef&&e.services.editEventDispatcher.editRef.blur(),e.services.focusDispatcher.moveFocusHorizontally(_(e.elementRef.nativeElement,y),0===t?-1:1),e.closeEditOverlay()}))},i.decorators=[{type:t.Directive,args:[{selector:"[cdkPopoverEdit][cdkPopoverEditTabOut]",host:N,inputs:L}]}],i.ctorParameters=function(){return[{type:t.ElementRef},{type:t.ViewContainerRef},{type:V},{type:W}]},i}(I),q=function(){function e(e,t,r,n){this.services=e,this.elementRef=t,this.templateRef=r,this.viewContainerRef=n,this.destroyed=new i.Subject,this.viewRef=null}return e.prototype.ngAfterViewInit=function(){this._row=_(this.elementRef.nativeElement,g),this.services.editEventDispatcher.registerRowWithHoverContent(this._row),this._listenForHoverAndFocusEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete(),this.viewRef&&this.viewRef.destroy(),this._row&&this.services.editEventDispatcher.deregisterRowWithHoverContent(this._row)},e.prototype.initElement=function(e){},e.prototype.makeElementHiddenButFocusable=function(e){e.style.opacity="0"},e.prototype.makeElementVisible=function(e){e.style.opacity=""},e.prototype._listenForHoverAndFocusEvents=function(){var e=this;this.services.editEventDispatcher.hoverOrFocusOnRow(this._row).pipe(r.takeUntil(this.destroyed)).subscribe((function(t){2===t||1===t?(e.viewRef?-1===e.viewContainerRef.indexOf(e.viewRef)&&(e.viewContainerRef.insert(e.viewRef),e.viewRef.markForCheck()):(e.viewRef=e.viewContainerRef.createEmbeddedView(e.templateRef,{}),e.initElement(e.viewRef.rootNodes[0]),e.viewRef.markForCheck()),2===t?e.makeElementVisible(e.viewRef.rootNodes[0]):e.makeElementHiddenButFocusable(e.viewRef.rootNodes[0])):e.viewRef&&e.viewContainerRef.detach(e.viewContainerRef.indexOf(e.viewRef))}))},e.decorators=[{type:t.Directive,args:[{selector:"[cdkRowHoverContent]"}]}],e.ctorParameters=function(){return[{type:V},{type:t.ElementRef},{type:t.TemplateRef},{type:t.ViewContainerRef}]},e}(),M=function(){function e(e,t){this.elementRef=e,this.editEventDispatcher=t;var i=e.nativeElement;"BUTTON"!==i.nodeName||i.getAttribute("type")||i.setAttribute("type","button")}return e.prototype.openEdit=function(e){this.editEventDispatcher.editing.next(_(this.elementRef.nativeElement,y)),e.stopPropagation()},e.decorators=[{type:t.Directive,args:[{selector:"[cdkEditOpen]"}]}],e.ctorParameters=function(){return[{type:t.ElementRef},{type:w}]},e.propDecorators={openEdit:[{type:t.HostListener,args:["click",["$event"]]}]},e}(),B=[I,Z,q,j,x,P,U,M],z=function(){function e(){}return e.decorators=[{type:t.NgModule,args:[{imports:[a.OverlayModule],exports:B,declarations:B,providers:[{provide:A,useClass:T}]}]}],e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
e.CdkEditClose=P,e.CdkEditControl=j,e.CdkEditOpen=M,e.CdkEditRevert=x,e.CdkEditable=U,e.CdkPopoverEdit=I,e.CdkPopoverEditModule=z,e.CdkPopoverEditTabOut=Z,e.CdkRowHoverContent=q,e.DefaultPopoverEditPositionStrategyFactory=T,e.EditEventDispatcher=w,e.EditRef=O,e.FocusDispatcher=D,e.FormValueContainer=F,e.PopoverEditPositionStrategyFactory=A,e._CELL_SELECTOR=y,e._closest=_,e._matches=b,e.ɵangular_material_src_cdk_experimental_popover_edit_popover_edit_a=V,e.ɵangular_material_src_cdk_experimental_popover_edit_popover_edit_b=W,Object.defineProperty(e,"__esModule",{value:!0})}));