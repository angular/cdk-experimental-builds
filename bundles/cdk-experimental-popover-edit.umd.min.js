!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/cdk/bidi"),require("@angular/cdk/keycodes"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/cdk/a11y"),require("@angular/cdk/scrolling"),require("@angular/common")):"function"==typeof define&&define.amd?define("@angular/cdk-experimental/popover-edit",["exports","@angular/core","rxjs","rxjs/operators","@angular/forms","@angular/cdk/bidi","@angular/cdk/keycodes","@angular/cdk/overlay","@angular/cdk/portal","@angular/cdk/a11y","@angular/cdk/scrolling","@angular/common"],t):t(((e=e||self).ng=e.ng||{},e.ng.cdkExperimental=e.ng.cdkExperimental||{},e.ng.cdkExperimental.popoverEdit={}),e.ng.core,e.rxjs,e.rxjs.operators,e.ng.forms,e.ng.cdk.bidi,e.ng.cdk.keycodes,e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.cdk.a11y,e.ng.cdk.scrolling,e.ng.common)}(this,(function(e,t,i,n,r,o,s,a,l,c,u,d){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function h(e,t){function i(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function f(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s}function v(e,t){return function(i,n){t(i,n,e)}}function y(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,r,o=i.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var b=".cdk-cell, .mat-cell, td",E=".cdk-popover-edit-cell, .mat-popover-edit-cell",_=".cdk-row, .mat-row, tr";
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function R(e,t){return e.matches?e.matches(t):e.msMatchesSelector(t)}function w(e,t){if(!(e instanceof Node))return null;for(var i=e;null!=i&&!(i instanceof Element);)i=i.parentNode;return i&&(k?i.closest(t):function n(e,t){for(var i=e;null!=i&&!(i instanceof Element&&R(i,t));)i=i.parentNode;return i||null}(i,t))}var k=!!Element.prototype.closest,C=40,O=0,S=function(){function e(e){var t=this;this._ngZone=e,this.editing=new i.Subject,this.hovering=new i.Subject,this.focused=new i.Subject,this.allRows=new i.Subject,this.mouseMove=new i.Subject,this.disabledCells=new WeakMap,this._editRef=null,this._distinctUntilChanged=n.distinctUntilChanged(),this._startWithNull=n.startWith(null),this._distinctShare=i.pipe(this._distinctUntilChanged,n.shareReplay(1)),this._startWithNullDistinct=i.pipe(this._startWithNull,this._distinctUntilChanged),this.editingAndEnabled=this.editing.pipe(n.filter((function(e){return null==e||!t.disabledCells.has(e)})),n.shareReplay(1)),this.editingOrFocused=i.combineLatest([this.editingAndEnabled.pipe(n.map((function(e){return w(e,_)})),this._startWithNull),this.focused.pipe(this._startWithNull)]).pipe(n.map((function(e){var t=g(e,2);return t[1]||t[0]})),this._distinctUntilChanged,n.auditTime(O),this._distinctUntilChanged,n.shareReplay(1)),this._rowsWithHoverContent=new WeakMap,this._currentlyEditing=null,this._hoveredContentStateDistinct=i.combineLatest([this._getFirstRowWithHoverContent(),this._getLastRowWithHoverContent(),this.editingOrFocused,this.hovering.pipe(n.distinctUntilChanged(),n.audit((function(e){return t.mouseMove.pipe(n.filter((function(t){return e===t})),t._startWithNull,n.debounceTime(C))})),this._startWithNullDistinct)]).pipe(n.skip(1),n.map(F),n.distinctUntilChanged(D),this._enterZone(),n.shareReplay(1)),this._editingAndEnabledDistinct=this.editingAndEnabled.pipe(n.distinctUntilChanged(),this._enterZone(),n.shareReplay(1)),this._lastSeenRow=null,this._lastSeenRowHoverOrFocus=null,this._editingAndEnabledDistinct.subscribe((function(e){t._currentlyEditing=e}))}return Object.defineProperty(e.prototype,"editRef",{get:function(){return this._editRef},enumerable:!1,configurable:!0}),e.prototype.editingCell=function(e){var t=null;return this._editingAndEnabledDistinct.pipe(n.map((function(i){return i===(t||(t=w(e,b)))})),this._distinctUntilChanged)},e.prototype.doneEditingCell=function(e){var t=w(e,b);this._currentlyEditing===t&&this.editing.next(null)},e.prototype.setActiveEditRef=function(e){this._editRef=e},e.prototype.unsetActiveEditRef=function(e){this._editRef===e&&(this._editRef=null)},e.prototype.registerRowWithHoverContent=function(e){this._rowsWithHoverContent.set(e,(this._rowsWithHoverContent.get(e)||0)+1)},e.prototype.deregisterRowWithHoverContent=function(e){var t=this._rowsWithHoverContent.get(e)||0;t<=1?this._rowsWithHoverContent.delete(e):this._rowsWithHoverContent.set(e,t-1)},e.prototype.hoverOrFocusOnRow=function(e){return e!==this._lastSeenRow&&(this._lastSeenRow=e,this._lastSeenRowHoverOrFocus=this._hoveredContentStateDistinct.pipe(n.map((function(t){return t.get(e)||0})),this._distinctShare)),this._lastSeenRowHoverOrFocus},e.prototype._enterZone=function(){var e=this;return function(t){return new i.Observable((function(i){return t.subscribe({next:function(t){return e._ngZone.run((function(){return i.next(t)}))},error:function(e){return i.error(e)},complete:function(){return i.complete()}})}))}},e.prototype._getFirstRowWithHoverContent=function(){var e=this;return this._mapAllRowsToSingleRow((function(t){for(var i=0,n=void 0;n=t[i];i++)if(e._rowsWithHoverContent.has(n))return n;return null}))},e.prototype._getLastRowWithHoverContent=function(){var e=this;return this._mapAllRowsToSingleRow((function(t){for(var i=t.length-1,n=void 0;n=t[i];i--)if(e._rowsWithHoverContent.has(n))return n;return null}))},e.prototype._mapAllRowsToSingleRow=function(e){return this.allRows.pipe(n.map(e),this._startWithNullDistinct)},f([t.Injectable(),y("design:paramtypes",[t.NgZone])],e)}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */function F(e){var t,i,n,r,o=g(e,4),s=o[0],a=o[1],l=o[2],c=o[3],u=new Map;try{for(var d=m([s,a,l&&l.previousElementSibling,l&&l.nextElementSibling]),p=d.next();!p.done;p=d.next()){var h=p.value;h&&u.set(h,1)}}catch(e){t={error:e}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(t)throw t.error}}try{for(var f=m([l,c]),v=f.next();!v.done;v=f.next()){var y=v.value;y&&u.set(y,2)}}catch(e){n={error:e}}finally{try{v&&!v.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}return u}function D(e,t){var i,n;if(e.size!==t.size)return!1;try{for(var r=m(Array.from(e.keys())),o=r.next();!o.done;o=r.next()){var s=o.value;if(t.get(s)!==e.get(s))return!1}}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return!0}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */var j=function(){function e(e,t,n){this._form=e,this._editEventDispatcher=t,this._ngZone=n,this._finalValueSubject=new i.Subject,this.finalValue=this._finalValueSubject.asObservable(),this._blurredSubject=new i.Subject,this.blurred=this._blurredSubject.asObservable(),this._editEventDispatcher.setActiveEditRef(this)}return e.prototype.init=function(e){var t=this;this._ngZone.onStable.pipe(n.take(1)).subscribe((function(){t.updateRevertValue(),e&&t.reset(e)}))},e.prototype.ngOnDestroy=function(){this._editEventDispatcher.unsetActiveEditRef(this),this._finalValueSubject.next(this._form.value),this._finalValueSubject.complete()},e.prototype.isValid=function(){return this._form.valid},e.prototype.updateRevertValue=function(){this._revertFormValue=this._form.value},e.prototype.close=function(){this._editEventDispatcher.editing.next(null)},e.prototype.blur=function(){this._blurredSubject.next()},e.prototype.reset=function(e){this._form.reset(e||this._revertFormValue)},f([t.Injectable(),v(0,t.Self()),y("design:paramtypes",[r.ControlContainer,S,t.NgZone])],e)}(),x=function(){function e(e){var t=this;this.directionality=e,this.keyObserver={next:function(e){return t.handleKeyboardEvent(e)}}}return e.prototype.moveFocusHorizontally=function(e,t){var i=Array.from(w(e,"table, cdk-table, mat-table").querySelectorAll(E)),n=i.indexOf(e)+t;i[n]&&i[n].focus()},e.prototype.moveFocusVertically=function(e,t){var i=w(e,_),n=Array.from(w(i,"table, cdk-table, mat-table").querySelectorAll(_)),r=n.indexOf(i),o=Array.from(i.querySelectorAll(E)).indexOf(e),s=r+t;if(n[s]){var a=Array.from(n[s].querySelectorAll(E));a[o]&&a[o].focus()}},e.prototype.handleKeyboardEvent=function(e){var t=w(e.target,E);if(t){switch(e.keyCode){case s.UP_ARROW:this.moveFocusVertically(t,-1);break;case s.DOWN_ARROW:this.moveFocusVertically(t,1);break;case s.LEFT_ARROW:this.moveFocusHorizontally(t,"ltr"===this.directionality.value?-1:1);break;case s.RIGHT_ARROW:this.moveFocusHorizontally(t,"ltr"===this.directionality.value?1:-1);break;default:return}e.preventDefault()}},e.ɵprov=t.ɵɵdefineInjectable({factory:function i(){return new e(t.ɵɵinject(o.Directionality))},token:e,providedIn:"root"}),e=f([t.Injectable({providedIn:"root"}),y("design:paramtypes",[o.Directionality])],e)}(),A=function(){function e(){this._formValues=new WeakMap}return e.prototype.for=function(e){var t=this._formValues,i=t.get(e);return i||t.set(e,i={}),i},e}(),T=function(){function e(e,n){this.elementRef=e,this.editRef=n,this.destroyed=new i.Subject,this.clickOutBehavior="close",this.preservedFormValueChange=new t.EventEmitter,this.ignoreSubmitUnlessValid=!0}return e.prototype.ngOnInit=function(){var e=this;this.editRef.init(this.preservedFormValue),this.editRef.finalValue.subscribe(this.preservedFormValueChange),this.editRef.blurred.subscribe((function(){return e._handleBlur()}))},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete()},e.prototype.handleFormSubmit=function(){this.ignoreSubmitUnlessValid&&!this.editRef.isValid()||(this.editRef.updateRevertValue(),this.editRef.close())},e.prototype.close=function(){this.editRef.close()},e.prototype.handlePossibleClickOut=function(e){if(!w(e.target,".cdk-edit-pane, .mat-edit-pane"))switch(this.clickOutBehavior){case"submit":this._triggerFormSubmit(),this.editRef.close();break;case"close":this.editRef.close()}},e.prototype._handleKeydown=function(e){"Escape"!==e.key||s.hasModifierKey(e)||(this.close(),e.preventDefault())},e.prototype._handleBlur=function(){"submit"===this.clickOutBehavior&&this._triggerFormSubmit()},e.prototype._triggerFormSubmit=function(){this.elementRef.nativeElement.dispatchEvent(new Event("submit"))},f([t.HostListener("ngSubmit"),y("design:type",Function),y("design:paramtypes",[]),y("design:returntype",void 0)],e.prototype,"handleFormSubmit",null),f([t.HostListener("document:click",["$event"]),y("design:type",Function),y("design:paramtypes",[Event]),y("design:returntype",void 0)],e.prototype,"handlePossibleClickOut",null),f([t.HostListener("keydown",["$event"]),y("design:type",Function),y("design:paramtypes",[KeyboardEvent]),y("design:returntype",void 0)],e.prototype,"_handleKeydown",null),f([t.Directive({selector:"form[cdkEditControl]",inputs:["clickOutBehavior: cdkEditControlClickOutBehavior","preservedFormValue: cdkEditControlPreservedFormValue","ignoreSubmitUnlessValid: cdkEditControlIgnoreSubmitUnlessValid"],outputs:["preservedFormValueChange: cdkEditControlPreservedFormValueChange"],providers:[j]}),y("design:paramtypes",[t.ElementRef,j])],e)}(),V=function(){function e(e){this.editRef=e,this.type="button"}return e.prototype.revertEdit=function(){this.editRef.reset()},f([t.Input(),y("design:type",String)],e.prototype,"type",void 0),f([t.HostListener("click"),y("design:type",Function),y("design:paramtypes",[]),y("design:returntype",void 0)],e.prototype,"revertEdit",null),f([t.Directive({selector:"button[cdkEditRevert]",host:{type:"button"}}),y("design:paramtypes",[j])],e)}(),H=function(){function e(e,t){this.elementRef=e,this.editRef=t;var i=e.nativeElement;"BUTTON"!==i.nodeName||i.getAttribute("type")||i.setAttribute("type","button")}return e.prototype.closeEdit=function(){this.editRef.close()},f([t.HostListener("click"),t.HostListener("keyup.enter"),t.HostListener("keyup.space"),y("design:type",Function),y("design:paramtypes",[]),y("design:returntype",void 0)],e.prototype,"closeEdit",null),f([t.Directive({selector:"[cdkEditClose]"}),y("design:paramtypes",[t.ElementRef,j])],e)}(),P=f([t.Injectable()],(function P(){})),W=function(e){function i(t,i){var n=e.call(this)||this;return n.direction=t,n.overlay=i,n}return h(i,e),i.prototype.positionStrategyForCells=function(e){return this.overlay.position().flexibleConnectedTo(e[0]).withGrowAfterOpen().withPush().withViewportMargin(16).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}])},i.prototype.sizeConfigForCells=function(e){return 0===e.length?{}:1===e.length?{width:e[0].getBoundingClientRect().width}:("ltr"===this.direction.value?(t=e[0],i=e[e.length-1]):(i=e[0],t=e[e.length-1]),{width:i.getBoundingClientRect().right-t.getBoundingClientRect().left});var t,i},f([t.Injectable(),y("design:paramtypes",[o.Directionality,a.Overlay])],i)}(P),U=f([t.Injectable(),y("design:paramtypes",[o.Directionality,S,x,c.FocusTrapFactory,t.NgZone,a.Overlay,P,u.ScrollDispatcher,u.ViewportRuler])],(function U(e,t,i,n,r,o,s,a,l){this.directionality=e,this.editEventDispatcher=t,this.focusDispatcher=i,this.focusTrapFactory=n,this.ngZone=r,this.overlay=o,this.positionFactory=s,this.scrollDispatcher=a,this.viewportRuler=l})),N=function(e){function t(t,n,r,o){var s=e.call(this,t,n,r,o,!0)||this;return s._escapeSubject=new i.Subject,s.startAnchorListener=function(){return s._escapeSubject.next(0),!0},s.endAnchorListener=function(){return s._escapeSubject.next(1),!0},s.attachAnchors(),s}return h(t,e),t.prototype.escapes=function(){return this._escapeSubject.asObservable()},t}(c.FocusTrap),L=function(){function e(e,t,i){this._checker=e,this._ngZone=t,this._document=i}return e.prototype.create=function(e){return new N(e,this._checker,this._ngZone,this._document)},e.ɵprov=t.ɵɵdefineInjectable({factory:function i(){return new e(t.ɵɵinject(c.InteractivityChecker),t.ɵɵinject(t.NgZone),t.ɵɵinject(d.DOCUMENT))},token:e,providedIn:"root"}),e=f([t.Injectable({providedIn:"root"}),v(2,t.Inject(d.DOCUMENT)),y("design:paramtypes",[c.InteractivityChecker,t.NgZone,Object])],e)}(),I=function(){function e(e,t,n,r){this.elementRef=e,this.editEventDispatcher=t,this.focusDispatcher=n,this.ngZone=r,this.destroyed=new i.Subject}return e.prototype.ngAfterViewInit=function(){this._listenForTableEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete()},e.prototype._listenForTableEvents=function(){var e=this,t=this.elementRef.nativeElement,r=function(e){return n.map((function(t){return w(t.target,e)}))};this.ngZone.runOutsideAngular((function(){i.fromEvent(t,"mouseover").pipe(r(_),n.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.hovering),i.fromEvent(t,"mouseleave").pipe(n.mapTo(null),n.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.hovering),i.fromEvent(t,"mousemove").pipe(n.throttleTime(10),r(_),n.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.mouseMove),i.fromEventPattern((function(e){return t.addEventListener("focus",e,!0)}),(function(e){return t.removeEventListener("focus",e,!0)})).pipe(n.takeUntil(e.destroyed),r(_),n.share()).subscribe(e.editEventDispatcher.focused),i.merge(i.fromEventPattern((function(e){return t.addEventListener("blur",e,!0)}),(function(e){return t.removeEventListener("blur",e,!0)})),i.fromEvent(t,"keydown").pipe(n.filter((function(e){return"Escape"===e.key})))).pipe(n.takeUntil(e.destroyed),n.mapTo(null),n.share()).subscribe(e.editEventDispatcher.focused),e.ngZone.onStable.pipe(n.takeUntil(e.destroyed),n.withLatestFrom(e.editEventDispatcher.editingOrFocused),n.filter((function(e){return null==g(e,2)[1]})),n.map((function(){return t.querySelectorAll(_)})),n.share()).subscribe(e.editEventDispatcher.allRows),i.fromEvent(t,"keydown").pipe(n.filter((function(e){return"Enter"===e.key})),r(b),n.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.editing),i.fromEvent(t,"keydown").pipe(n.takeUntil(e.destroyed)).subscribe(e.focusDispatcher.keyObserver)}))},f([t.Directive({selector:"table[editable], cdk-table[editable], mat-table[editable]",providers:[S,U]}),y("design:paramtypes",[t.ElementRef,S,x,t.NgZone])],e)}(),Z={"[attr.tabindex]":"disabled ? null : 0",class:"cdk-popover-edit-cell","[attr.aria-haspopup]":"!disabled"},q=["template: cdkPopoverEdit","context: cdkPopoverEditContext","colspan: cdkPopoverEditColspan","disabled: cdkPopoverEditDisabled"],M=function(){function e(e,t,n){this.services=e,this.elementRef=t,this.viewContainerRef=n,this.template=null,this._colspan={},this._disabled=!1,this.destroyed=new i.Subject}return Object.defineProperty(e.prototype,"colspan",{get:function(){return this._colspan},set:function(e){this._colspan=e,this.overlayRef&&(this.overlayRef.updatePositionStrategy(this._getPositionStrategy()),this.overlayRef.hasAttached()&&this._updateOverlaySize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,e?(this.services.editEventDispatcher.doneEditingCell(this.elementRef.nativeElement),this.services.editEventDispatcher.disabledCells.set(this.elementRef.nativeElement,!0)):this.services.editEventDispatcher.disabledCells.delete(this.elementRef.nativeElement)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this._startListeningToEditEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete(),this.focusTrap&&(this.focusTrap.destroy(),this.focusTrap=void 0),this.overlayRef&&this.overlayRef.dispose()},e.prototype.initFocusTrap=function(){this.focusTrap=this.services.focusTrapFactory.create(this.overlayRef.overlayElement)},e.prototype.closeEditOverlay=function(){this.services.editEventDispatcher.doneEditingCell(this.elementRef.nativeElement)},e.prototype.panelClass=function(){return"cdk-edit-pane"},e.prototype._startListeningToEditEvents=function(){var e=this;this.services.editEventDispatcher.editingCell(this.elementRef.nativeElement).pipe(n.takeUntil(this.destroyed)).subscribe((function(t){t&&e.template?(e.overlayRef||e._createEditOverlay(),e._showEditOverlay()):e.overlayRef&&(e._maybeReturnFocusToCell(),e.overlayRef.detach())}))},e.prototype._createEditOverlay=function(){var e=this;this.overlayRef=this.services.overlay.create({disposeOnNavigation:!0,panelClass:this.panelClass(),positionStrategy:this._getPositionStrategy(),scrollStrategy:this.services.overlay.scrollStrategies.reposition(),direction:this.services.directionality}),this.initFocusTrap(),this.overlayRef.overlayElement.setAttribute("aria-role","dialog"),this.overlayRef.detachments().subscribe((function(){return e.closeEditOverlay()}))},e.prototype._showEditOverlay=function(){var e=this;this.overlayRef.attach(new l.TemplatePortal(this.template,this.viewContainerRef,{$implicit:this.context})),this.services.ngZone.runOutsideAngular((function(){setTimeout((function(){e.focusTrap.focusInitialElement()}))})),i.merge(this.services.scrollDispatcher.scrolled(),this.services.viewportRuler.change()).pipe(n.startWith(null),n.takeUntil(this.overlayRef.detachments()),n.takeUntil(this.destroyed)).subscribe((function(){e._updateOverlaySize()}))},e.prototype._getOverlayCells=function(){var e=w(this.elementRef.nativeElement,b);if(!this._colspan.before&&!this._colspan.after)return[e];var t=w(this.elementRef.nativeElement,_),i=Array.from(t.querySelectorAll(b)),n=i.indexOf(e);return i.slice(n-(this._colspan.before||0),n+(this._colspan.after||0)+1)},e.prototype._getPositionStrategy=function(){return this.services.positionFactory.positionStrategyForCells(this._getOverlayCells())},e.prototype._updateOverlaySize=function(){this.overlayRef.updateSize(this.services.positionFactory.sizeConfigForCells(this._getOverlayCells()))},e.prototype._maybeReturnFocusToCell=function(){w(document.activeElement,".cdk-edit-pane, .mat-edit-pane")===this.overlayRef.overlayElement&&this.elementRef.nativeElement.focus()},f([t.Directive({selector:"[cdkPopoverEdit]:not([cdkPopoverEditTabOut])",host:Z,inputs:q}),y("design:paramtypes",[U,t.ElementRef,t.ViewContainerRef])],e)}(),B=function(e){function i(t,i,n,r){var o=e.call(this,n,t,i)||this;return o.focusEscapeNotifierFactory=r,o}return h(i,e),i.prototype.initFocusTrap=function(){var e=this;this.focusTrap=this.focusEscapeNotifierFactory.create(this.overlayRef.overlayElement),this.focusTrap.escapes().pipe(n.takeUntil(this.destroyed)).subscribe((function(t){e.services.editEventDispatcher.editRef&&e.services.editEventDispatcher.editRef.blur(),e.services.focusDispatcher.moveFocusHorizontally(w(e.elementRef.nativeElement,b),0===t?-1:1),e.closeEditOverlay()}))},f([t.Directive({selector:"[cdkPopoverEdit][cdkPopoverEditTabOut]",host:Z,inputs:q}),y("design:paramtypes",[t.ElementRef,t.ViewContainerRef,U,L])],i)}(M),z=function(){function e(e,t,n,r){this.services=e,this.elementRef=t,this.templateRef=n,this.viewContainerRef=r,this.destroyed=new i.Subject,this.viewRef=null}return e.prototype.ngAfterViewInit=function(){this._row=w(this.elementRef.nativeElement,_),this.services.editEventDispatcher.registerRowWithHoverContent(this._row),this._listenForHoverAndFocusEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete(),this.viewRef&&this.viewRef.destroy(),this._row&&this.services.editEventDispatcher.deregisterRowWithHoverContent(this._row)},e.prototype.initElement=function(e){},e.prototype.makeElementHiddenButFocusable=function(e){e.style.opacity="0"},e.prototype.makeElementVisible=function(e){e.style.opacity=""},e.prototype._listenForHoverAndFocusEvents=function(){var e=this;this.services.editEventDispatcher.hoverOrFocusOnRow(this._row).pipe(n.takeUntil(this.destroyed)).subscribe((function(t){2===t||1===t?(e.viewRef?-1===e.viewContainerRef.indexOf(e.viewRef)&&(e.viewContainerRef.insert(e.viewRef),e.viewRef.markForCheck()):(e.viewRef=e.viewContainerRef.createEmbeddedView(e.templateRef,{}),e.initElement(e.viewRef.rootNodes[0]),e.viewRef.markForCheck()),2===t?e.makeElementVisible(e.viewRef.rootNodes[0]):e.makeElementHiddenButFocusable(e.viewRef.rootNodes[0])):e.viewRef&&e.viewContainerRef.detach(e.viewContainerRef.indexOf(e.viewRef))}))},f([t.Directive({selector:"[cdkRowHoverContent]"}),y("design:paramtypes",[U,t.ElementRef,t.TemplateRef,t.ViewContainerRef])],e)}(),K=function(){function e(e,t){this.elementRef=e,this.editEventDispatcher=t;var i=e.nativeElement;"BUTTON"!==i.nodeName||i.getAttribute("type")||i.setAttribute("type","button")}return e.prototype.openEdit=function(e){this.editEventDispatcher.editing.next(w(this.elementRef.nativeElement,b)),e.stopPropagation()},f([t.HostListener("click",["$event"]),y("design:type",Function),y("design:paramtypes",[Event]),y("design:returntype",void 0)],e.prototype,"openEdit",null),f([t.Directive({selector:"[cdkEditOpen]"}),y("design:paramtypes",[t.ElementRef,S])],e)}(),$=[M,B,z,T,V,H,I,K],G=f([t.NgModule({imports:[a.OverlayModule],exports:$,declarations:$,providers:[{provide:P,useClass:W}]})],(function G(){}));
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
e.CdkEditClose=H,e.CdkEditControl=T,e.CdkEditOpen=K,e.CdkEditRevert=V,e.CdkEditable=I,e.CdkPopoverEdit=M,e.CdkPopoverEditModule=G,e.CdkPopoverEditTabOut=B,e.CdkRowHoverContent=z,e.DefaultPopoverEditPositionStrategyFactory=W,e.EditEventDispatcher=S,e.EditRef=j,e.FocusDispatcher=x,e.FormValueContainer=A,e.PopoverEditPositionStrategyFactory=P,e._CELL_SELECTOR=b,e._closest=w,e._matches=R,e.ɵangular_material_src_cdk_experimental_popover_edit_popover_edit_a=U,e.ɵangular_material_src_cdk_experimental_popover_edit_popover_edit_b=L,Object.defineProperty(e,"__esModule",{value:!0})}));