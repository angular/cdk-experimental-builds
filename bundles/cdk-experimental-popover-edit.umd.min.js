!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/cdk/bidi"),require("@angular/cdk/keycodes"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("@angular/cdk/a11y"),require("@angular/cdk/scrolling"),require("@angular/common")):"function"==typeof define&&define.amd?define("@angular/cdk-experimental/popover-edit",["exports","@angular/core","rxjs","rxjs/operators","@angular/forms","@angular/cdk/bidi","@angular/cdk/keycodes","@angular/cdk/overlay","@angular/cdk/portal","@angular/cdk/a11y","@angular/cdk/scrolling","@angular/common"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).ng=e.ng||{},e.ng.cdkExperimental=e.ng.cdkExperimental||{},e.ng.cdkExperimental.popoverEdit={}),e.ng.core,e.rxjs,e.rxjs.operators,e.ng.forms,e.ng.cdk.bidi,e.ng.cdk.keycodes,e.ng.cdk.overlay,e.ng.cdk.portal,e.ng.cdk.a11y,e.ng.cdk.scrolling,e.ng.common)}(this,(function(e,t,r,i,n,o,s,a,c,l,u,p){"use strict";function d(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var h=d(t),f=d(o),v=d(l),y=d(p),m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function b(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var _=".cdk-cell, .mat-cell, td",R=".cdk-popover-edit-cell, .mat-popover-edit-cell",w=".cdk-row, .mat-row, tr";
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
function k(e,t){return e.matches?e.matches(t):e.msMatchesSelector(t)}function C(e,t){if(!(e instanceof Node))return null;for(var r=e;null!=r&&!(r instanceof Element);)r=r.parentNode;return r&&(O?r.closest(t):function i(e,t){for(var r=e;null!=r&&!(r instanceof Element&&k(r,t));)r=r.parentNode;return r||null}(r,t))}var O=!!Element.prototype.closest,S=function(){function e(e){var t=this;this._ngZone=e,this.editing=new r.Subject,this.hovering=new r.Subject,this.focused=new r.Subject,this.allRows=new r.Subject,this.mouseMove=new r.Subject,this.disabledCells=new WeakMap,this._editRef=null,this._distinctUntilChanged=i.distinctUntilChanged(),this._startWithNull=i.startWith(null),this._distinctShare=r.pipe(this._distinctUntilChanged,i.shareReplay(1)),this._startWithNullDistinct=r.pipe(this._startWithNull,this._distinctUntilChanged),this.editingAndEnabled=this.editing.pipe(i.filter((function(e){return null==e||!t.disabledCells.has(e)})),i.shareReplay(1)),this.editingOrFocused=r.combineLatest([this.editingAndEnabled.pipe(i.map((function(e){return C(e,w)})),this._startWithNull),this.focused.pipe(this._startWithNull)]).pipe(i.map((function(e){var t=E(e,2);return t[1]||t[0]})),this._distinctUntilChanged,i.auditTime(0),this._distinctUntilChanged,i.shareReplay(1)),this._rowsWithHoverContent=new WeakMap,this._currentlyEditing=null,this._hoveredContentStateDistinct=r.combineLatest([this._getFirstRowWithHoverContent(),this._getLastRowWithHoverContent(),this.editingOrFocused,this.hovering.pipe(i.distinctUntilChanged(),i.audit((function(e){return t.mouseMove.pipe(i.filter((function(t){return e===t})),t._startWithNull,i.debounceTime(40))})),this._startWithNullDistinct)]).pipe(i.skip(1),i.map(D),i.distinctUntilChanged(F),this._enterZone(),i.shareReplay(1)),this._editingAndEnabledDistinct=this.editingAndEnabled.pipe(i.distinctUntilChanged(),this._enterZone(),i.shareReplay(1)),this._lastSeenRow=null,this._lastSeenRowHoverOrFocus=null,this._editingAndEnabledDistinct.subscribe((function(e){t._currentlyEditing=e}))}return Object.defineProperty(e.prototype,"editRef",{get:function(){return this._editRef},enumerable:!1,configurable:!0}),e.prototype.editingCell=function(e){var t=null;return this._editingAndEnabledDistinct.pipe(i.map((function(r){return r===(t||(t=C(e,_)))})),this._distinctUntilChanged)},e.prototype.doneEditingCell=function(e){var t=C(e,_);this._currentlyEditing===t&&this.editing.next(null)},e.prototype.setActiveEditRef=function(e){this._editRef=e},e.prototype.unsetActiveEditRef=function(e){this._editRef===e&&(this._editRef=null)},e.prototype.registerRowWithHoverContent=function(e){this._rowsWithHoverContent.set(e,(this._rowsWithHoverContent.get(e)||0)+1)},e.prototype.deregisterRowWithHoverContent=function(e){var t=this._rowsWithHoverContent.get(e)||0;t<=1?this._rowsWithHoverContent.delete(e):this._rowsWithHoverContent.set(e,t-1)},e.prototype.hoverOrFocusOnRow=function(e){return e!==this._lastSeenRow&&(this._lastSeenRow=e,this._lastSeenRowHoverOrFocus=this._hoveredContentStateDistinct.pipe(i.map((function(t){return t.get(e)||0})),this._distinctShare)),this._lastSeenRowHoverOrFocus},e.prototype._enterZone=function(){var e=this;return function(t){return new r.Observable((function(r){return t.subscribe({next:function(t){return e._ngZone.run((function(){return r.next(t)}))},error:function(e){return r.error(e)},complete:function(){return r.complete()}})}))}},e.prototype._getFirstRowWithHoverContent=function(){var e=this;return this._mapAllRowsToSingleRow((function(t){for(var r=0,i=void 0;i=t[r];r++)if(e._rowsWithHoverContent.has(i))return i;return null}))},e.prototype._getLastRowWithHoverContent=function(){var e=this;return this._mapAllRowsToSingleRow((function(t){for(var r=t.length-1,i=void 0;i=t[r];r--)if(e._rowsWithHoverContent.has(i))return i;return null}))},e.prototype._mapAllRowsToSingleRow=function(e){return this.allRows.pipe(i.map(e),this._startWithNullDistinct)},e}();function D(e){var t,r,i,n,o=E(e,4),s=o[0],a=o[1],c=o[2],l=o[3],u=new Map;try{for(var p=b([s,a,c&&c.previousElementSibling,c&&c.nextElementSibling]),d=p.next();!d.done;d=p.next()){var h=d.value;h&&u.set(h,1)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}try{for(var f=b([c,l]),v=f.next();!v.done;v=f.next()){var y=v.value;y&&u.set(y,2)}}catch(e){i={error:e}}finally{try{v&&!v.done&&(n=f.return)&&n.call(f)}finally{if(i)throw i.error}}return u}function F(e,t){var r,i;if(e.size!==t.size)return!1;try{for(var n=b(Array.from(e.keys())),o=n.next();!o.done;o=n.next()){var s=o.value;if(t.get(s)!==e.get(s))return!1}}catch(e){r={error:e}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return!0}
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */S.decorators=[{type:t.Injectable}],S.ctorParameters=function(){return[{type:t.NgZone}]};var j=function(){function e(e,t,i){this._form=e,this._editEventDispatcher=t,this._ngZone=i,this._finalValueSubject=new r.Subject,this.finalValue=this._finalValueSubject,this._blurredSubject=new r.Subject,this.blurred=this._blurredSubject,this._editEventDispatcher.setActiveEditRef(this)}return e.prototype.init=function(e){var t=this;this._ngZone.onStable.pipe(i.take(1)).subscribe((function(){t.updateRevertValue(),e&&t.reset(e)}))},e.prototype.ngOnDestroy=function(){this._editEventDispatcher.unsetActiveEditRef(this),this._finalValueSubject.next(this._form.value),this._finalValueSubject.complete()},e.prototype.isValid=function(){return this._form.valid},e.prototype.updateRevertValue=function(){this._revertFormValue=this._form.value},e.prototype.close=function(){this._editEventDispatcher.editing.next(null)},e.prototype.blur=function(){this._blurredSubject.next()},e.prototype.reset=function(e){this._form.reset(e||this._revertFormValue)},e}();j.decorators=[{type:t.Injectable}],j.ctorParameters=function(){return[{type:n.ControlContainer,decorators:[{type:t.Self}]},{type:S},{type:t.NgZone}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var P=function(){function e(e){var t=this;this.directionality=e,this.keyObserver={next:function(e){return t.handleKeyboardEvent(e)}}}return e.prototype.moveFocusHorizontally=function(e,t){var r=Array.from(C(e,"table, cdk-table, mat-table").querySelectorAll(R)),i=r.indexOf(e)+t;r[i]&&r[i].focus()},e.prototype.moveFocusVertically=function(e,t){var r=C(e,w),i=Array.from(C(r,"table, cdk-table, mat-table").querySelectorAll(w)),n=i.indexOf(r),o=Array.from(r.querySelectorAll(R)).indexOf(e),s=n+t;if(i[s]){var a=Array.from(i[s].querySelectorAll(R));a[o]&&a[o].focus()}},e.prototype.handleKeyboardEvent=function(e){var t=C(e.target,R);if(t){switch(e.keyCode){case s.UP_ARROW:this.moveFocusVertically(t,-1);break;case s.DOWN_ARROW:this.moveFocusVertically(t,1);break;case s.LEFT_ARROW:this.moveFocusHorizontally(t,"ltr"===this.directionality.value?-1:1);break;case s.RIGHT_ARROW:this.moveFocusHorizontally(t,"ltr"===this.directionality.value?1:-1);break;default:return}e.preventDefault()}},e}();P.ɵprov=h.ɵɵdefineInjectable({factory:function e(){return new P(h.ɵɵinject(f.Directionality))},token:P,providedIn:"root"}),P.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],P.ctorParameters=function(){return[{type:o.Directionality}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var x=function(){function e(){this._formValues=new WeakMap}return e.prototype.for=function(e){var t=this._formValues,r=t.get(e);return r||t.set(e,r={}),r},e}(),T=function(){function e(e,i){this.elementRef=e,this.editRef=i,this.destroyed=new r.Subject,this.clickOutBehavior="close",this.preservedFormValueChange=new t.EventEmitter,this.ignoreSubmitUnlessValid=!0}return e.prototype.ngOnInit=function(){var e=this;this.editRef.init(this.preservedFormValue),this.editRef.finalValue.subscribe(this.preservedFormValueChange),this.editRef.blurred.subscribe((function(){return e._handleBlur()}))},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete()},e.prototype.handleFormSubmit=function(){this.ignoreSubmitUnlessValid&&!this.editRef.isValid()||(this.editRef.updateRevertValue(),this.editRef.close())},e.prototype.close=function(){this.editRef.close()},e.prototype.handlePossibleClickOut=function(e){if(!C(e.target,".cdk-edit-pane, .mat-edit-pane"))switch(this.clickOutBehavior){case"submit":this._triggerFormSubmit(),this.editRef.close();break;case"close":this.editRef.close()}},e.prototype._handleKeydown=function(e){"Escape"!==e.key||s.hasModifierKey(e)||(this.close(),e.preventDefault())},e.prototype._handleBlur=function(){"submit"===this.clickOutBehavior&&this._triggerFormSubmit()},e.prototype._triggerFormSubmit=function(){this.elementRef.nativeElement.dispatchEvent(new Event("submit"))},e}();
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */T.decorators=[{type:t.Directive,args:[{selector:"form[cdkEditControl]",inputs:["clickOutBehavior: cdkEditControlClickOutBehavior","preservedFormValue: cdkEditControlPreservedFormValue","ignoreSubmitUnlessValid: cdkEditControlIgnoreSubmitUnlessValid"],outputs:["preservedFormValueChange: cdkEditControlPreservedFormValueChange"],providers:[j]}]}],T.ctorParameters=function(){return[{type:t.ElementRef},{type:j}]},T.propDecorators={handleFormSubmit:[{type:t.HostListener,args:["ngSubmit"]}],handlePossibleClickOut:[{type:t.HostListener,args:["document:click",["$event"]]}],_handleKeydown:[{type:t.HostListener,args:["keydown",["$event"]]}]};var A=function(){function e(e){this.editRef=e,this.type="button"}return e.prototype.revertEdit=function(){this.editRef.reset()},e}();A.decorators=[{type:t.Directive,args:[{selector:"button[cdkEditRevert]",host:{type:"button"}}]}],A.ctorParameters=function(){return[{type:j}]},A.propDecorators={type:[{type:t.Input}],revertEdit:[{type:t.HostListener,args:["click"]}]};var V,H=function(){function e(e,t){this.elementRef=e,this.editRef=t;var r=e.nativeElement;"BUTTON"!==r.nodeName||r.getAttribute("type")||r.setAttribute("type","button")}return e.prototype.closeEdit=function(){this.editRef.close()},e}();H.decorators=[{type:t.Directive,args:[{selector:"[cdkEditClose]"}]}],H.ctorParameters=function(){return[{type:t.ElementRef},{type:j}]},H.propDecorators={closeEdit:[{type:t.HostListener,args:["click"]},{type:t.HostListener,args:["keydown.enter"]},{type:t.HostListener,args:["keydown.space"]}]},(V=function V(){}).decorators=[{type:t.Injectable}];var W,N=function(e){function t(t,r){var i=e.call(this)||this;return i.direction=t,i.overlay=r,i}return g(t,e),t.prototype.positionStrategyForCells=function(e){return this.overlay.position().flexibleConnectedTo(e[0]).withGrowAfterOpen().withPush().withViewportMargin(16).withPositions([{originX:"start",originY:"top",overlayX:"start",overlayY:"top"}])},t.prototype.sizeConfigForCells=function(e){return 0===e.length?{}:1===e.length?{width:e[0].getBoundingClientRect().width}:("ltr"===this.direction.value?(t=e[0],r=e[e.length-1]):(r=e[0],t=e[e.length-1]),{width:r.getBoundingClientRect().right-t.getBoundingClientRect().left});var t,r},t}(V);N.decorators=[{type:t.Injectable}],N.ctorParameters=function(){return[{type:o.Directionality},{type:a.Overlay}]},(W=function W(e,t,r,i,n,o,s,a,c){this.directionality=e,this.editEventDispatcher=t,this.focusDispatcher=r,this.focusTrapFactory=i,this.ngZone=n,this.overlay=o,this.positionFactory=s,this.scrollDispatcher=a,this.viewportRuler=c}).decorators=[{type:t.Injectable}],W.ctorParameters=function(){return[{type:o.Directionality},{type:S},{type:P},{type:l.FocusTrapFactory},{type:t.NgZone},{type:a.Overlay},{type:V},{type:u.ScrollDispatcher},{type:u.ViewportRuler}]};var U=function(e){function t(t,i,n,o){var s=e.call(this,t,i,n,o,!0)||this;return s._escapeSubject=new r.Subject,s.startAnchorListener=function(){return s._escapeSubject.next(0),!0},s.endAnchorListener=function(){return s._escapeSubject.next(1),!0},s.attachAnchors(),s}return g(t,e),t.prototype.escapes=function(){return this._escapeSubject},t}(l.FocusTrap),L=function(){function e(e,t,r){this._checker=e,this._ngZone=t,this._document=r}return e.prototype.create=function(e){return new U(e,this._checker,this._ngZone,this._document)},e}();L.ɵprov=h.ɵɵdefineInjectable({factory:function e(){return new L(h.ɵɵinject(v.InteractivityChecker),h.ɵɵinject(h.NgZone),h.ɵɵinject(y.DOCUMENT))},token:L,providedIn:"root"}),L.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],L.ctorParameters=function(){return[{type:l.InteractivityChecker},{type:t.NgZone},{type:void 0,decorators:[{type:t.Inject,args:[p.DOCUMENT]}]}]};var I=function(){function e(e,t,i,n){this.elementRef=e,this.editEventDispatcher=t,this.focusDispatcher=i,this.ngZone=n,this.destroyed=new r.Subject}return e.prototype.ngAfterViewInit=function(){this._listenForTableEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete()},e.prototype._listenForTableEvents=function(){var e=this,t=this.elementRef.nativeElement,n=function(e){return i.map((function(t){return C(t.target,e)}))};this.ngZone.runOutsideAngular((function(){r.fromEvent(t,"mouseover").pipe(n(w),i.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.hovering),r.fromEvent(t,"mouseleave").pipe(i.mapTo(null),i.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.hovering),r.fromEvent(t,"mousemove").pipe(i.throttleTime(10),n(w),i.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.mouseMove),r.fromEventPattern((function(e){return t.addEventListener("focus",e,!0)}),(function(e){return t.removeEventListener("focus",e,!0)})).pipe(n(w),i.share(),i.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.focused),r.merge(r.fromEventPattern((function(e){return t.addEventListener("blur",e,!0)}),(function(e){return t.removeEventListener("blur",e,!0)})),r.fromEvent(t,"keydown").pipe(i.filter((function(e){return"Escape"===e.key})))).pipe(i.mapTo(null),i.share(),i.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.focused),e.ngZone.onStable.pipe(i.withLatestFrom(e.editEventDispatcher.editingOrFocused),i.filter((function(e){return null==E(e,2)[1]})),i.map((function(){return t.querySelectorAll(w)})),i.share(),i.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.allRows),r.fromEvent(t,"keydown").pipe(i.filter((function(e){return"Enter"===e.key})),n(_),i.takeUntil(e.destroyed)).subscribe(e.editEventDispatcher.editing),r.fromEvent(t,"keydown").pipe(i.takeUntil(e.destroyed)).subscribe(e.focusDispatcher.keyObserver)}))},e}();I.decorators=[{type:t.Directive,args:[{selector:"table[editable], cdk-table[editable], mat-table[editable]",providers:[S,W]}]}],I.ctorParameters=function(){return[{type:t.ElementRef},{type:S},{type:P},{type:t.NgZone}]};var Z={"[attr.tabindex]":"disabled ? null : 0",class:"cdk-popover-edit-cell","[attr.aria-haspopup]":"!disabled"},q=["template: cdkPopoverEdit","context: cdkPopoverEditContext","colspan: cdkPopoverEditColspan","disabled: cdkPopoverEditDisabled"],M=function(){function e(e,t,i){this.services=e,this.elementRef=t,this.viewContainerRef=i,this.template=null,this._colspan={},this._disabled=!1,this.destroyed=new r.Subject}return Object.defineProperty(e.prototype,"colspan",{get:function(){return this._colspan},set:function(e){this._colspan=e,this.overlayRef&&(this.overlayRef.updatePositionStrategy(this._getPositionStrategy()),this.overlayRef.hasAttached()&&this._updateOverlaySize())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e,e?(this.services.editEventDispatcher.doneEditingCell(this.elementRef.nativeElement),this.services.editEventDispatcher.disabledCells.set(this.elementRef.nativeElement,!0)):this.services.editEventDispatcher.disabledCells.delete(this.elementRef.nativeElement)},enumerable:!1,configurable:!0}),e.prototype.ngAfterViewInit=function(){this._startListeningToEditEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete(),this.focusTrap&&(this.focusTrap.destroy(),this.focusTrap=void 0),this.overlayRef&&this.overlayRef.dispose()},e.prototype.initFocusTrap=function(){this.focusTrap=this.services.focusTrapFactory.create(this.overlayRef.overlayElement)},e.prototype.closeEditOverlay=function(){this.services.editEventDispatcher.doneEditingCell(this.elementRef.nativeElement)},e.prototype.panelClass=function(){return"cdk-edit-pane"},e.prototype._startListeningToEditEvents=function(){var e=this;this.services.editEventDispatcher.editingCell(this.elementRef.nativeElement).pipe(i.takeUntil(this.destroyed)).subscribe((function(t){t&&e.template?(e.overlayRef||e._createEditOverlay(),e._showEditOverlay()):e.overlayRef&&(e._maybeReturnFocusToCell(),e.overlayRef.detach())}))},e.prototype._createEditOverlay=function(){var e=this;this.overlayRef=this.services.overlay.create({disposeOnNavigation:!0,panelClass:this.panelClass(),positionStrategy:this._getPositionStrategy(),scrollStrategy:this.services.overlay.scrollStrategies.reposition(),direction:this.services.directionality}),this.initFocusTrap(),this.overlayRef.overlayElement.setAttribute("aria-role","dialog"),this.overlayRef.detachments().subscribe((function(){return e.closeEditOverlay()}))},e.prototype._showEditOverlay=function(){var e=this;this.overlayRef.attach(new c.TemplatePortal(this.template,this.viewContainerRef,{$implicit:this.context})),this.services.ngZone.runOutsideAngular((function(){setTimeout((function(){e.focusTrap.focusInitialElement()}))})),r.merge(this.services.scrollDispatcher.scrolled(),this.services.viewportRuler.change()).pipe(i.startWith(null),i.takeUntil(r.merge(this.overlayRef.detachments(),this.destroyed))).subscribe((function(){e._updateOverlaySize()}))},e.prototype._getOverlayCells=function(){var e=C(this.elementRef.nativeElement,_);if(!this._colspan.before&&!this._colspan.after)return[e];var t=C(this.elementRef.nativeElement,w),r=Array.from(t.querySelectorAll(_)),i=r.indexOf(e);return r.slice(i-(this._colspan.before||0),i+(this._colspan.after||0)+1)},e.prototype._getPositionStrategy=function(){return this.services.positionFactory.positionStrategyForCells(this._getOverlayCells())},e.prototype._updateOverlaySize=function(){this.overlayRef.updateSize(this.services.positionFactory.sizeConfigForCells(this._getOverlayCells()))},e.prototype._maybeReturnFocusToCell=function(){C(document.activeElement,".cdk-edit-pane, .mat-edit-pane")===this.overlayRef.overlayElement&&this.elementRef.nativeElement.focus()},e}();M.decorators=[{type:t.Directive,args:[{selector:"[cdkPopoverEdit]:not([cdkPopoverEditTabOut])",host:Z,inputs:q}]}],M.ctorParameters=function(){return[{type:W},{type:t.ElementRef},{type:t.ViewContainerRef}]};var B=function(e){function t(t,r,i,n){var o=e.call(this,i,t,r)||this;return o.focusEscapeNotifierFactory=n,o}return g(t,e),t.prototype.initFocusTrap=function(){var e=this;this.focusTrap=this.focusEscapeNotifierFactory.create(this.overlayRef.overlayElement),this.focusTrap.escapes().pipe(i.takeUntil(this.destroyed)).subscribe((function(t){e.services.editEventDispatcher.editRef&&e.services.editEventDispatcher.editRef.blur(),e.services.focusDispatcher.moveFocusHorizontally(C(e.elementRef.nativeElement,_),0===t?-1:1),e.closeEditOverlay()}))},t}(M);B.decorators=[{type:t.Directive,args:[{selector:"[cdkPopoverEdit][cdkPopoverEditTabOut]",host:Z,inputs:q}]}],B.ctorParameters=function(){return[{type:t.ElementRef},{type:t.ViewContainerRef},{type:W},{type:L}]};var z=function(){function e(e,t,i,n){this.services=e,this.elementRef=t,this.templateRef=i,this.viewContainerRef=n,this.destroyed=new r.Subject,this.viewRef=null}return e.prototype.ngAfterViewInit=function(){this._row=C(this.elementRef.nativeElement,w),this.services.editEventDispatcher.registerRowWithHoverContent(this._row),this._listenForHoverAndFocusEvents()},e.prototype.ngOnDestroy=function(){this.destroyed.next(),this.destroyed.complete(),this.viewRef&&this.viewRef.destroy(),this._row&&this.services.editEventDispatcher.deregisterRowWithHoverContent(this._row)},e.prototype.initElement=function(e){},e.prototype.makeElementHiddenButFocusable=function(e){e.style.opacity="0"},e.prototype.makeElementVisible=function(e){e.style.opacity=""},e.prototype._listenForHoverAndFocusEvents=function(){var e=this;this.services.editEventDispatcher.hoverOrFocusOnRow(this._row).pipe(i.takeUntil(this.destroyed)).subscribe((function(t){2===t||1===t?(e.viewRef?-1===e.viewContainerRef.indexOf(e.viewRef)&&(e.viewContainerRef.insert(e.viewRef),e.viewRef.markForCheck()):(e.viewRef=e.viewContainerRef.createEmbeddedView(e.templateRef,{}),e.initElement(e.viewRef.rootNodes[0]),e.viewRef.markForCheck()),2===t?e.makeElementVisible(e.viewRef.rootNodes[0]):e.makeElementHiddenButFocusable(e.viewRef.rootNodes[0])):e.viewRef&&e.viewContainerRef.detach(e.viewContainerRef.indexOf(e.viewRef))}))},e}();z.decorators=[{type:t.Directive,args:[{selector:"[cdkRowHoverContent]"}]}],z.ctorParameters=function(){return[{type:W},{type:t.ElementRef},{type:t.TemplateRef},{type:t.ViewContainerRef}]};var K=function(){function e(e,t){this.elementRef=e,this.editEventDispatcher=t;var r=e.nativeElement;"BUTTON"!==r.nodeName||r.getAttribute("type")||r.setAttribute("type","button")}return e.prototype.openEdit=function(e){this.editEventDispatcher.editing.next(C(this.elementRef.nativeElement,_)),e.stopPropagation()},e}();K.decorators=[{type:t.Directive,args:[{selector:"[cdkEditOpen]"}]}],K.ctorParameters=function(){return[{type:t.ElementRef},{type:S}]},K.propDecorators={openEdit:[{type:t.HostListener,args:["click",["$event"]]}]};
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
var $,G=[M,B,z,T,A,H,I,K];($=function $(){}).decorators=[{type:t.NgModule,args:[{imports:[a.OverlayModule],exports:G,declarations:G,providers:[{provide:V,useClass:N}]}]}],
/**
     * @license
     * Copyright Google LLC All Rights Reserved.
     *
     * Use of this source code is governed by an MIT-style license that can be
     * found in the LICENSE file at https://angular.io/license
     */
e.CdkEditClose=H,e.CdkEditControl=T,e.CdkEditOpen=K,e.CdkEditRevert=A,e.CdkEditable=I,e.CdkPopoverEdit=M,e.CdkPopoverEditModule=$,e.CdkPopoverEditTabOut=B,e.CdkRowHoverContent=z,e.DefaultPopoverEditPositionStrategyFactory=N,e.EditEventDispatcher=S,e.EditRef=j,e.FocusDispatcher=P,e.FormValueContainer=x,e.PopoverEditPositionStrategyFactory=V,e._CELL_SELECTOR=_,e._closest=C,e._matches=k,e.ɵangular_material_src_cdk_experimental_popover_edit_popover_edit_a=W,e.ɵangular_material_src_cdk_experimental_popover_edit_popover_edit_b=L,Object.defineProperty(e,"__esModule",{value:!0})}));