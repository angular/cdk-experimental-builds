{"version":3,"file":"cdk-experimental-combobox.umd.js","sources":["../../../../../src/cdk-experimental/combobox/combobox.ts","../../../../../src/cdk-experimental/combobox/combobox-panel.ts","../../../../../src/cdk-experimental/combobox/combobox-module.ts","../../../../../src/cdk-experimental/combobox/public-api.ts","../../../../../src/cdk-experimental/combobox/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport type OpenAction = 'focus' | 'click' | 'downKey' | 'toggle';\nexport type OpenActionInput = OpenAction | OpenAction[] | string | null | undefined;\n\nimport {\n  AfterContentInit,\n  Directive,\n  ElementRef,\n  EventEmitter,\n  Input,\n  OnDestroy,\n  Optional,\n  Output, ViewContainerRef\n} from '@angular/core';\nimport {CdkComboboxPanel, AriaHasPopupValue} from './combobox-panel';\nimport {TemplatePortal} from '@angular/cdk/portal';\nimport {\n  ConnectedPosition,\n  FlexibleConnectedPositionStrategy,\n  Overlay,\n  OverlayConfig,\n  OverlayRef\n} from '@angular/cdk/overlay';\nimport {Directionality} from '@angular/cdk/bidi';\nimport {BooleanInput, coerceBooleanProperty} from '@angular/cdk/coercion';\n\n\n@Directive({\n  selector: '[cdkCombobox]',\n  exportAs: 'cdkCombobox',\n  host: {\n    'role': 'combobox',\n    '(click)': 'toggle()',\n    '[attr.aria-disabled]': 'disabled',\n    '[attr.aria-controls]': 'contentId',\n    '[attr.aria-haspopup]': 'contentType'\n  }\n})\nexport class CdkCombobox<T = unknown> implements OnDestroy, AfterContentInit {\n  @Input('cdkComboboxTriggerFor')\n  get panel(): CdkComboboxPanel<T> | undefined { return this._panel; }\n  set panel(panel: CdkComboboxPanel<T> | undefined) { this._panel = panel; }\n  private _panel: CdkComboboxPanel<T> | undefined;\n\n  @Input()\n  value: T;\n\n  @Input()\n  get disabled(): boolean { return this._disabled; }\n  set disabled(value: boolean) { this._disabled = coerceBooleanProperty(value); }\n  private _disabled: boolean = false;\n\n  @Input()\n  get openActions(): OpenAction[] {\n    return this._openActions;\n  }\n  set openActions(action: OpenAction[]) {\n    this._openActions = this._coerceOpenActionProperty(action);\n  }\n  private _openActions: OpenAction[] = ['click'];\n\n  @Output('comboboxPanelOpened') readonly opened: EventEmitter<void> = new EventEmitter<void>();\n  @Output('comboboxPanelClosed') readonly closed: EventEmitter<void> = new EventEmitter<void>();\n  @Output('panelValueChanged') readonly panelValueChanged: EventEmitter<T> = new EventEmitter<T>();\n\n  private _overlayRef: OverlayRef;\n  private _panelContent: TemplatePortal;\n  contentId: string = '';\n  contentType: AriaHasPopupValue;\n\n  constructor(\n    private readonly _elementRef: ElementRef<HTMLElement>,\n    private readonly _overlay: Overlay,\n    protected readonly _viewContainerRef: ViewContainerRef,\n    @Optional() private readonly _directionality?: Directionality\n  ) {}\n\n  ngAfterContentInit() {\n    this._panel?.valueUpdated.subscribe(data => {\n      this._setComboboxValue(data);\n      this.close();\n    });\n\n    this._panel?.contentIdUpdated.subscribe(id => {\n      this.contentId = id;\n    });\n\n    this._panel?.contentTypeUpdated.subscribe(type => {\n      this.contentType = type;\n    });\n  }\n\n  ngOnDestroy() {\n    this.opened.complete();\n    this.closed.complete();\n    this.panelValueChanged.complete();\n  }\n\n  /** Toggles the open state of the panel. */\n  toggle() {\n    if (this.hasPanel()) {\n      this.isOpen() ? this.close() : this.open();\n    }\n  }\n\n  /** If the combobox is closed and not disabled, opens the panel. */\n  open() {\n    if (!this.isOpen() && !this.disabled) {\n      this.opened.next();\n      this._overlayRef = this._overlayRef || this._overlay.create(this._getOverlayConfig());\n      this._overlayRef.attach(this._getPanelContent());\n    }\n  }\n\n  /** If the combobox is open and not disabled, closes the panel. */\n  close() {\n    if (this.isOpen() && !this.disabled) {\n      this.closed.next();\n      this._overlayRef.detach();\n    }\n  }\n\n  /** Returns true if panel is currently opened. */\n  isOpen(): boolean {\n    return this._overlayRef ? this._overlayRef.hasAttached() : false;\n  }\n\n  /** Returns true if combobox has a child panel. */\n  hasPanel(): boolean {\n    return !!this.panel;\n  }\n\n  private _setComboboxValue(value: T) {\n    const valueChanged = (this.value !== value);\n    this.value = value;\n\n    if (valueChanged) {\n      this.panelValueChanged.emit(value);\n      this._setTextContent(value);\n    }\n  }\n\n  private _setTextContent(content: T) {\n    if (typeof content === 'string') {\n      this._elementRef.nativeElement.textContent = `${content}`;\n    }\n  }\n\n  private _getOverlayConfig() {\n    return new OverlayConfig({\n      positionStrategy: this._getOverlayPositionStrategy(),\n      scrollStrategy: this._overlay.scrollStrategies.block(),\n      direction: this._directionality,\n    });\n  }\n\n  private _getOverlayPositionStrategy(): FlexibleConnectedPositionStrategy {\n    return this._overlay\n        .position()\n        .flexibleConnectedTo(this._elementRef)\n        .withPositions(this._getOverlayPositions());\n  }\n\n  private _getOverlayPositions(): ConnectedPosition[] {\n    return [\n      {originX: 'start', originY: 'bottom', overlayX: 'start', overlayY: 'top'},\n      {originX: 'start', originY: 'top', overlayX: 'start', overlayY: 'bottom'},\n      {originX: 'end', originY: 'bottom', overlayX: 'end', overlayY: 'top'},\n      {originX: 'end', originY: 'top', overlayX: 'end', overlayY: 'bottom'},\n    ];\n  }\n\n  private _getPanelContent() {\n    const hasPanelChanged = this._panel?._templateRef !== this._panelContent?.templateRef;\n    if (this._panel && (!this._panel || hasPanelChanged)) {\n      this._panelContent = new TemplatePortal(this._panel._templateRef, this._viewContainerRef);\n    }\n\n    return this._panelContent;\n  }\n\n  private _coerceOpenActionProperty(input: string | OpenAction[]): OpenAction[] {\n    let actions: OpenAction[] = [];\n    if (typeof input === 'string') {\n      actions.push(input as OpenAction);\n    } else {\n      actions = input;\n    }\n    return actions;\n  }\n\n  static ngAcceptInputType_openActions: OpenActionInput;\n  static ngAcceptInputType_disabled: BooleanInput;\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport type AriaHasPopupValue = 'false' | 'true' | 'menu' | 'listbox' | 'tree' | 'grid' | 'dialog';\n\nimport {Directive, TemplateRef} from '@angular/core';\nimport {Subject} from 'rxjs';\n\n@Directive({\n  selector: 'ng-template[cdkComboboxPanel]',\n  exportAs: 'cdkComboboxPanel',\n})\nexport class CdkComboboxPanel<T = unknown> {\n\n  valueUpdated: Subject<T> = new Subject<T>();\n  contentIdUpdated: Subject<string> = new Subject<string>();\n  contentTypeUpdated: Subject<AriaHasPopupValue> = new Subject<AriaHasPopupValue>();\n\n  contentId: string = '';\n  contentType: AriaHasPopupValue;\n\n  constructor(readonly _templateRef: TemplateRef<unknown>) {}\n\n  /** Tells the parent combobox to closet he panel and sends back the content value. */\n  closePanel(data?: T) {\n    this.valueUpdated.next(data);\n  }\n\n  /** Registers the content's id and the content type with the panel. */\n  _registerContent(contentId: string, contentType: AriaHasPopupValue) {\n    this.contentId = contentId;\n    if (contentType !== 'listbox' && contentType !== 'dialog') {\n      throw Error('CdkComboboxPanel currently only supports listbox or dialog content.');\n    }\n    this.contentType = contentType;\n\n    this.contentIdUpdated.next(this.contentId);\n    this.contentTypeUpdated.next(this.contentType);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {NgModule} from '@angular/core';\nimport {OverlayModule} from '@angular/cdk/overlay';\nimport {CdkCombobox} from './combobox';\nimport {CdkComboboxPanel} from './combobox-panel';\n\nconst EXPORTED_DECLARATIONS = [CdkCombobox, CdkComboboxPanel];\n@NgModule({\n  imports: [OverlayModule],\n  exports: EXPORTED_DECLARATIONS,\n  declarations: EXPORTED_DECLARATIONS,\n})\nexport class CdkComboboxModule {}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport * from './combobox-module';\nexport * from './combobox';\nexport * from './combobox-panel';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","coerceBooleanProperty","OverlayConfig","TemplatePortal","Directive","ElementRef","Overlay","ViewContainerRef","Directionality","Optional","Input","Output","Subject","TemplateRef","NgModule","OverlayModule"],"mappings":"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"}